{"version":3,"file":"main.js","sources":["../../src/helpers/NO_AUDIO.ts","../../src/utils/Vector.ts","../../src/helpers/getElements.ts","../../src/utils/positionElem.ts","../../src/Cursor.ts","../../src/Character.ts","../../src/utils/debounce.ts","../../src/Typewriter.ts","../../src/utils/getPositionFromEvent.ts","../../src/utils/addLongTouch.ts","../../src/utils/createElement.ts","../../src/Menu.ts","../node_modules/lz-string/libs/lz-string.js","../../src/Storage.ts","../../src/Dialog.ts","../node_modules/tslib/tslib.es6.js","../../src/utils/prettyDate.ts","../../src/utils/downloadFile.ts","../../src/utils/getFileContents.ts","../../src/utils/importExportSaved.ts","../../src/SavedList.ts","../../src/getAppMenu.ts","../../src/App.ts","../../src/helpers/isDebugMode.ts","../../src/tracking/analytics.ts","../../src/index.ts"],"sourcesContent":["/**\n * mapping for soundless keys\n * Don't ever allow Android's ridiculous 229 code\n */\nconst NO_AUDIO: Record<number, string> & Partial<Record<229, never>> = {\n  0: 'PRTSCR',\n  8: 'BACKSPACE',\n  9: 'TAB',\n  16: 'SHIFT',\n  17: 'CTRL',\n  18: 'ALT',\n  20: 'CAPSLOCK',\n  27: 'ESC',\n  32: 'SPACE',\n  33: 'PGUP',\n  34: 'PGDN',\n  35: 'END',\n  36: 'HOME',\n  37: 'LEFT',\n  38: 'UP',\n  39: 'RIGHT',\n  40: 'DOWN',\n  45: 'INSERT',\n  46: 'DEL',\n  91: 'WIN',\n  92: 'WIN',\n  112: 'F1',\n  113: 'F2',\n  114: 'F3',\n  115: 'F4',\n  116: 'F5',\n  117: 'F6',\n  118: 'F7',\n  119: 'F8',\n  120: 'F9',\n  121: 'F10',\n  122: 'F11',\n  123: 'F12',\n  144: 'NUMLOCK',\n  145: 'SCROLLLOCK',\n  224: 'CMD',\n};\n\nexport default NO_AUDIO;\n","class Vector {\n  x: number;\n\n  y: number;\n\n  /**\n   * Vector for positioning\n   */\n  constructor(x: number, y: number) {\n    this.x = x;\n    this.y = y;\n  }\n\n  add(vector: Vector | number): Vector {\n    if (typeof vector === 'number') {\n      return new Vector(this.x + vector, this.y + vector);\n    }\n    return new Vector(this.x + vector.x, this.y + vector.y);\n  }\n\n  _add(vector: Vector | number): Vector {\n    this.x += typeof vector === 'number' ? vector : vector.x;\n    this.y += typeof vector === 'number' ? vector : vector.y;\n\n    return this;\n  }\n\n  subtract(vector: Vector | number): Vector {\n    if (typeof vector === 'number') {\n      return new Vector(this.x - vector, this.y - vector);\n    }\n    return new Vector(this.x - vector.x, this.y - vector.y);\n  }\n\n  _subtract(vector: Vector | number): Vector {\n    this.x -= typeof vector === 'number' ? vector : vector.x;\n    this.y -= typeof vector === 'number' ? vector : vector.y;\n    return this;\n  }\n\n  divideBy(num: number): Vector {\n    return new Vector(this.x / num, this.y / num);\n  }\n\n  multiplyBy(num: number): Vector {\n    return new Vector(this.x * num, this.y * num);\n  }\n}\n\nexport default Vector;\n","export const container = document.getElementById('container') as HTMLElement;\nexport const textInput = document.getElementById(\n  'text-input'\n) as HTMLInputElement;\nexport const textCanvas = document.getElementById(\n  'text-canvas'\n) as HTMLCanvasElement;\nexport const cursorCanvas = document.getElementById(\n  'cursor-canvas'\n) as HTMLCanvasElement;\nexport const textCtx = textCanvas.getContext('2d', {\n  alpha: true,\n}) as CanvasRenderingContext2D;\nexport const cursorCtx = cursorCanvas.getContext(\n  '2d'\n) as CanvasRenderingContext2D;\n","import Vector from './Vector';\n\n/* eslint-disable no-param-reassign */\nconst positionElem = (\n  elem: HTMLElement,\n  { x, y }: Pick<Vector, 'x' | 'y'>\n): void => {\n  // avoid Cumulative Layout Shift: https://web.dev/cls/\n  elem.style.transform = `translate(${x}px, ${y}px)`;\n};\n\nexport default positionElem;\n","import { cursorCtx, textInput } from './helpers/getElements';\nimport positionElem from './utils/positionElem';\nimport Vector from './utils/Vector';\n\nconst FONT_SIZE = 26;\nconst containerScale = 1;\nconst GLOBAL_ALPHA = 0.72;\nconst letterSize = parseInt(\n  String(Math.min(FONT_SIZE, window.innerWidth / 17)),\n  10\n);\nconst letterWidth = (letterSize * 12) / 20;\nconst lineHeight = letterSize + 8;\nconst cursorWidth = letterWidth;\nconst cursorHeight = lineHeight - 6;\nconst paddingVec = (function getPaddingVec() {\n  const _x = Math.min(100, window.innerWidth / 8);\n  const _y = Math.min(_x, window.innerHeight / 8);\n  return new Vector(_x, _y);\n})();\n\ntextInput.style.width = `${cursorWidth}px`;\ntextInput.style.height = `${cursorHeight}px`;\n\n// top-left\nconst initialPosVec = paddingVec;\n\nexport class Cursor {\n  _cursorTimeout?: number;\n\n  _raf?: number;\n\n  _time?: Date;\n\n  _opacity?: number;\n\n  position = initialPosVec;\n\n  reset = () => {\n    this.update(initialPosVec);\n  };\n\n  clear = () => {\n    // console.log('clear');\n    const _pos = this.position.subtract(1).divideBy(containerScale);\n\n    // rect appears to have a border on the bottom-right\n    const width = cursorWidth + 4;\n    const height = cursorHeight + 4;\n    cursorCtx.clearRect(_pos.x, _pos.y, width, height);\n  };\n\n  /**\n   * @param {Vector} vec\n   */\n  update = (vec: Vector) => {\n    // console.log('update');\n    // move the \"hidden\" input\n    positionElem(textInput, {\n      x: Math.min(vec.x, window.innerWidth - cursorWidth),\n      y: Math.min(vec.y, window.innerHeight),\n    });\n\n    // clear the canvas\n    this.clear();\n\n    // update the position\n    this.position = vec;\n\n    // draw canvas at new position\n    this.draw();\n  };\n\n  _draw = () => {\n    // console.log('_draw');\n    const _pos = this.position.divideBy(containerScale);\n\n    cursorCtx.fillRect(_pos.x, _pos.y, cursorWidth, cursorHeight);\n  };\n\n  draw = () => {\n    // console.log('draw');\n    // console.log('_raf', this._raf);\n    this._draw();\n\n    // console.log('this._cursorTimeout: ', this._cursorTimeout);\n    // 2.2s\n    window.clearTimeout(this._cursorTimeout!);\n    if (this._raf) {\n      window.cancelAnimationFrame(this._raf);\n    }\n    this._opacity = GLOBAL_ALPHA;\n    // console.log('this._opacity: ', this._opacity);\n\n\n\n    this._cursorTimeout = window.setTimeout(this.fadeOut.bind(this), 2200);\n  };\n\n  nudge = (vec: Vector) => {\n    this.update(this.position.add(vec.multiplyBy(containerScale)));\n  };\n\n  moveleft = () => {\n    this.nudge(new Vector(-cursorWidth, 0));\n  };\n\n  moveright = () => {\n    this.nudge(new Vector(cursorWidth, 0));\n  };\n\n  moveup = () => {\n    this.nudge(new Vector(0, -cursorHeight));\n  };\n\n  movedown = () => {\n    this.nudge(new Vector(0, cursorHeight));\n  };\n\n  /** centers on mouse click */\n  moveToClick = (vec: Vector) => {\n    this.update(vec.subtract(new Vector(cursorWidth / 2, cursorHeight / 2)));\n  };\n\n  addtab = () => {\n    this.nudge(new Vector(letterWidth * 4, 0));\n  };\n\n  newline = () => {\n    this.update(new Vector(paddingVec.x, this.position.y + lineHeight));\n  };\n\n  fadeOut = () => {\n    // console.log('fadeOut');\n    this._time = new Date();\n    this._raf = requestAnimationFrame(this._fadeanim.bind(this));\n  };\n\n  _fadeanim = () => {\n    const dt = Date.now() - this._time!.valueOf();\n    const newOpacity = this._opacity! - (0.1 * dt) / 300;\n\n    if (newOpacity <= 0) {\n      this.clear();\n    } else {\n      cursorCtx.save();\n      this.clear();\n      this._opacity = newOpacity;\n      cursorCtx.globalAlpha = this._opacity;\n      this._draw();\n      cursorCtx.restore();\n      this._raf = window.requestAnimationFrame(this._fadeanim.bind(this));\n    }\n  };\n\n  /** mapping for keys that move cursor; disallow ridiculous Android 'Process' */\n  navButtons: Record<string, () => void> & Partial<Record<'Process', never>> = {\n    Backspace: this.moveleft.bind(this),\n    Tab: this.addtab.bind(this),\n    ArrowLeft: this.moveleft.bind(this),\n    ArrowUp: this.moveup.bind(this),\n    ArrowRight: this.moveright.bind(this),\n    ArrowDown: this.movedown.bind(this),\n    Enter: this.newline.bind(this),\n  };\n}\n","import { textCtx } from './helpers/getElements';\nimport Vector from './utils/Vector';\n\nconst ALPHA_MARGIN = 0.06;\nconst ROTATE_MARGIN = 0.05;\nconst TRANSLATE_MARGIN = 0.2;\nconst GLOBAL_ALPHA = 0.72;\n\nfunction randMargin(num: number, margin: number) {\n  const min = num - margin;\n  const max = num + margin;\n  const value = Math.random() * (max - min) + min;\n  return value;\n}\n\ntype CharacterTypewriter = Pick<\n  import('./Typewriter').TypeWriter,\n  'canvasOffset'\n>;\n\nexport class Character extends Vector {\n  s: string;\n\n  rotate: number;\n\n  alpha: number;\n\n  typewriter: CharacterTypewriter;\n\n  constructor(\n    typewriter: CharacterTypewriter,\n    charStr: string,\n    _x: number,\n    _y: number\n  ) {\n    // save vector position\n    super(randMargin(_x, TRANSLATE_MARGIN), randMargin(_y, TRANSLATE_MARGIN));\n\n    this.s = charStr;\n    this.rotate = randMargin(0, ROTATE_MARGIN);\n    this.alpha = randMargin(GLOBAL_ALPHA, ALPHA_MARGIN);\n    this.typewriter = typewriter;\n\n    // save inverse of current typewriter offsets\n    // useful for applying future changing offsets\n    // in redraw functions\n    this._subtract(typewriter.canvasOffset);\n\n    this.draw();\n  }\n\n  draw = () => {\n    // console.log('draw');\n    // console.log('this.s', this.s);\n    // apply current typewriter offsets\n    const vec = this.add(this.typewriter.canvasOffset);\n    // console.log('vec', vec);\n    //\n    // console.log('textCtx', textCtx);\n    if (textCtx) {\n      textCtx.save();\n      textCtx.translate(vec.x, vec.y);\n      textCtx.rotate(this.rotate);\n      textCtx.globalAlpha = this.alpha;\n      textCtx.fillText(this.s, 0, 0);\n      textCtx.restore();\n    }\n  };\n}\n","const debounce = <T extends (...args: any[]) => void>(\n  fn: T,\n  delay = 100\n): ((this: ThisParameterType<T>, ...args: Parameters<T>) => void) => {\n  let timeOutId: number;\n\n  return (...args) => {\n    if (timeOutId) {\n      clearTimeout(timeOutId);\n    }\n    timeOutId = window.setTimeout(() => {\n      fn(...args);\n    }, delay);\n  };\n};\n\nexport default debounce;","import Vector from './utils/Vector';\nimport { Cursor } from './Cursor';\nimport { Character } from './Character';\nimport { container, cursorCtx, textCtx } from './helpers/getElements';\nimport debounce from './utils/debounce';\nimport positionElem from './utils/positionElem';\n\nconst FONT_SIZE = 26;\nconst TEXT_COLOR = '#150904';\nconst CURSOR_COLOR = '#4787ea';\nconst GLOBAL_ALPHA = 0.72;\nconst letterSize = parseInt(\n  String(Math.min(FONT_SIZE, window.innerWidth / 17)),\n  10\n);\n\ninterface TypeWriterClass {\n  canvasOffset: Vector;\n  containerScale: number;\n  chars: Character[];\n  addCharacter(_chars: string): void;\n  redraw(): void;\n  resetCanvases(): void;\n  reposition(vec?: Vector | UIEvent): void;\n  debouncedReposition(this: unknown, vec?: Vector | UIEvent): void;\n  reset(): void;\n  cursor: Cursor;\n  export(): string;\n  import(str: string): void;\n}\n\nexport class TypeWriter implements TypeWriterClass {\n  static _instance: TypeWriterClass;\n\n  canvasOffset = new Vector(0, 0);\n\n  containerScale = 1;\n\n  chars: Character[] = [];\n\n  cursor = new Cursor();\n\n  constructor() {\n    if (TypeWriter._instance) {\n      return TypeWriter._instance;\n    }\n\n    TypeWriter._instance = this;\n\n    // add events\n    window.addEventListener('resize', this.debouncedReposition);\n  }\n\n  addCharacter = (_chars: string, _x?: number, _y?: number): void => {\n    // console.log('addCharacter in TS file.');\n    // console.log('_chars: ', _chars);\n    // console.log('this.chars: ', this.chars);\n    // console.log('_x: ', _x);\n    // console.log('_y: ', _y);\n    // manually set position and update cursor\n    if (_x !== undefined && _y !== undefined) {\n      this.chars.push(new Character(this, _chars, _x, _y));\n      this.cursor.update(new Vector(_x, _y));\n      return;\n    }\n    // console.log('chars: ', this.chars);\n    // iterate characters and move cursor right\n    for (let i = 0, len = _chars.length; i < len; i += 1) {\n      const {\n        position: { x, y },\n      } = this.cursor;\n      const char = _chars[i];\n\n      this.chars.push(new Character(this, char, x, y));\n      this.cursor.moveright();\n    }\n    // console.log('chars: ', this.chars);\n  };\n\n  redraw = (): void => {\n    // console.log('redraw');\n    // console.log('chars: ', this.chars);\n    this.chars.forEach((char) => char.draw());\n  };\n\n  resetCanvases = (): void => {\n    [textCtx, cursorCtx].forEach((ctx) => {\n      const { canvas } = ctx;\n      const { devicePixelRatio = 1, innerWidth, innerHeight } = window;\n\n      ctx.setTransform(1, 0, 0, 1, 0, 0);\n\n      canvas.width = innerWidth * devicePixelRatio;\n      canvas.height = innerHeight * devicePixelRatio;\n      canvas.style.width = `${innerWidth}px`;\n      canvas.style.height = `${innerHeight}px`;\n\n      ctx.scale(devicePixelRatio, devicePixelRatio);\n\n      ctx.globalAlpha = GLOBAL_ALPHA;\n    });\n\n    // reset contexts, because resizing wipes them\n    textCtx.font = `${letterSize}px Special Elite, serif`;\n    textCtx.textBaseline = 'top';\n    textCtx.fillStyle = TEXT_COLOR;\n\n    cursorCtx.fillStyle = CURSOR_COLOR;\n    cursorCtx.scale(this.containerScale, this.containerScale);\n  };\n\n  /**\n   * offset characters for given x/y\n   * useful for moving/dragging\n   * useful for redrawing (b/c needs resetting)\n   */\n  reposition = (vec?: Vector | UIEvent): void => {\n    if (vec instanceof Vector) {\n      this.canvasOffset._add(vec);\n    }\n\n    positionElem(container, { x: 0, y: 0 });\n\n    this.resetCanvases();\n    this.redraw();\n  };\n\n  debouncedReposition = debounce(this.reposition, 100);\n\n  /**\n   * back to original blank canvas\n   */\n  reset = () => {\n    this.chars = [];\n    this.cursor.reset();\n    this.canvasOffset = new Vector(0, 0);\n    this.containerScale = 1;\n    container.setAttribute('style', '');\n\n    this.reposition();\n    this.cursor.draw();\n  };\n\n  export() {\n    // just save x,y,str and re-instantiate classes in import\n    return JSON.stringify(\n      this.chars.map(({ x, y, s }: Character) => ({ x, y, s }))\n    );\n  }\n\n  import(str: string) {\n    try {\n      const chars: Pick<Character, 'x' | 'y' | 's'>[] = JSON.parse(str);\n\n      if (!Array.isArray(chars)) {\n        return;\n      }\n\n      this.reset();\n\n      for (const { s, x, y } of chars) {\n        this.addCharacter(s, x, y);\n      }\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error('failed to import');\n    }\n  }\n}\n","import Vector from './Vector';\n\nconst getPositionFromEvent = (e: TouchEvent | MouseEvent): Vector => {\n  if ('touches' in e) {\n    const touch = e.type === 'touchend' ? e.changedTouches[0] : e.touches[0];\n\n    return new Vector(touch.pageX, touch.pageY);\n  }\n\n  return new Vector(e.pageX, e.pageY);\n};\n\nexport default getPositionFromEvent;\n","/**\n * Add mobile equivalent for contextmenu event.\n * User touches element for a given length of time\n */\nconst addLongTouch = (\n  elem: HTMLElement,\n  callback: (event: TouchEvent) => void,\n  delay = 350\n): (() => void) => {\n  let timeout: number;\n\n  const clear = () => {\n    window.clearTimeout(timeout);\n    timeout = 0;\n  };\n\n  const onTouchStart = (e: TouchEvent) => {\n    if (e.touches.length === 1) {\n      timeout = window.setTimeout(() => callback(e), delay);\n    } else if (timeout) {\n      // clear on multiple touches\n      clear();\n    }\n  };\n\n  elem.addEventListener('touchstart', onTouchStart);\n  elem.addEventListener('touchmove', clear);\n  elem.addEventListener('touchend', clear);\n\n  return () => {\n    elem.removeEventListener('touchstart', onTouchStart);\n    elem.removeEventListener('touchmove', clear);\n    elem.removeEventListener('touchend', clear);\n  };\n};\n\nexport default addLongTouch;\n","function createElement<T extends keyof HTMLElementTagNameMap>(\n  tagname: T,\n  params?: Partial<Writable<HTMLElementTagNameMap[T]>>\n): HTMLElementTagNameMap[T] {\n  const elem = document.createElement(tagname);\n\n  // eslint-disable-next-line guard-for-in\n  for (const key in params) {\n    const typedKey = key as keyof typeof params;\n    (elem as any)[typedKey] = params[typedKey];\n  }\n\n  return elem;\n}\n\nexport default createElement;\n","import { cursorCanvas, textInput } from './helpers/getElements';\nimport createElement from './utils/createElement';\nimport getPositionFromEvent from './utils/getPositionFromEvent';\nimport positionElem from './utils/positionElem';\n\ninterface MenuItem {\n  callback?: AnyFunction;\n  href?: string;\n}\n\nconst isAnchorElement = (a: HTMLElement): a is HTMLAnchorElement =>\n  a.tagName === 'A';\n\nconst eventTarget = cursorCanvas;\n\nclass Menu {\n  menu = createElement('div', {\n    className: 'popup menu',\n    id: 'menu',\n  });\n\n  menuBackdrop = createElement('div', {\n    className: 'backdrop menu-backdrop',\n    id: 'menu-backdrop',\n  });\n\n  constructor() {\n    this.events('on');\n\n    this.menu.setAttribute('role', 'list');\n    this.menu.tabIndex = -1;\n\n    this.menuBackdrop.appendChild(this.menu);\n  }\n\n  destroy() {\n    this.events('off');\n    this.menuBackdrop.parentNode?.removeChild(this.menuBackdrop);\n  }\n\n  addMenuItem(innerHTML: string, { callback, href }: MenuItem = {}) {\n    const tagname = href ? 'a' : 'div';\n    const menuItem = createElement(tagname, {\n      innerHTML,\n      className: 'menu-item',\n    });\n\n    if (isAnchorElement(menuItem)) {\n      menuItem.target = '_blank';\n      menuItem.href = href!;\n    }\n\n    if (callback) {\n      menuItem.addEventListener('click', callback);\n      menuItem.addEventListener('keydown', (e: any) => {\n        if (e.key === 'Enter') {\n          callback();\n        }\n      });\n    }\n\n    if (callback || href) {\n      menuItem.classList.add('clickable');\n      menuItem.tabIndex = 0;\n    }\n\n    menuItem.setAttribute('role', 'listitem');\n\n    this.menu.appendChild(menuItem);\n  }\n\n  addDivider() {\n    const hr = createElement('hr');\n\n    this.menu.appendChild(hr);\n  }\n\n  events(onoff = 'on') {\n    const method = onoff === 'on' ? 'addEventListener' : 'removeEventListener';\n\n    const events: Record<string, AnyFunction> = {\n      contextmenu: this.handleContextMenu,\n    };\n\n    // eslint-disable-next-line guard-for-in\n    for (const key in events) {\n      eventTarget[method](key, events[key]);\n    }\n  }\n\n  handleContextMenu = (e: MouseEvent) => {\n    if (this.menu.contains(e.target as Node)) return;\n\n    // open menu at position\n    const buffer = 5;\n    const { x, y } = getPositionFromEvent(e).add(buffer);\n\n    e.preventDefault();\n\n    this.openMenu({ x, y });\n\n    window.gtag?.('event', 'menu:open', {\n      event_category: 'menu',\n    });\n  };\n\n  openMenu(position: { x: number; y: number }) {\n    if (this.menuBackdrop.parentNode == null) {\n      document.body.appendChild(this.menuBackdrop);\n      document.body.addEventListener('click', this.handleClose);\n    }\n\n    positionElem(this.menu, position);\n\n    // remove tabIndex from textInput\n    textInput.tabIndex = -1;\n    textInput.disabled = true;\n\n    this.menu.focus();\n  }\n\n  closeMenu() {\n    const elem = this.menuBackdrop;\n\n    // re-adds tabIndex for textInput\n    textInput.tabIndex = 0;\n    textInput.disabled = false;\n\n    // TODO: add test for this\n    if (!elem || elem.parentNode == null) {\n      return;\n    }\n\n    // don't listen for more close events\n    document.body.removeEventListener('click', this.handleClose);\n\n    // actually remove things after exit animation\n    const onExit = (e: AnimationEvent) => {\n      if (e.target !== elem) return;\n      elem.removeEventListener('animationend', onExit);\n      elem.classList.remove('exit');\n      elem.parentNode?.removeChild(elem);\n    };\n\n    elem.addEventListener('animationend', onExit);\n\n    // trigger exit animation\n    elem.classList.add('exit');\n  }\n\n  handleClose = ({ target }: MouseEvent) => {\n    if (!this.menu.contains(target as Node)) {\n      this.closeMenu();\n    }\n  };\n}\n\nexport default Menu;\n","// Copyright (c) 2013 Pieroxy <pieroxy@pieroxy.net>\n// This work is free. You can redistribute it and/or modify it\n// under the terms of the WTFPL, Version 2\n// For more information see LICENSE.txt or http://www.wtfpl.net/\n//\n// For more information, the home page:\n// http://pieroxy.net/blog/pages/lz-string/testing.html\n//\n// LZ-based compression algorithm, version 1.4.4\nvar LZString = (function() {\n\n// private property\nvar f = String.fromCharCode;\nvar keyStrBase64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\nvar keyStrUriSafe = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$\";\nvar baseReverseDic = {};\n\nfunction getBaseValue(alphabet, character) {\n  if (!baseReverseDic[alphabet]) {\n    baseReverseDic[alphabet] = {};\n    for (var i=0 ; i<alphabet.length ; i++) {\n      baseReverseDic[alphabet][alphabet.charAt(i)] = i;\n    }\n  }\n  return baseReverseDic[alphabet][character];\n}\n\nvar LZString = {\n  compressToBase64 : function (input) {\n    if (input == null) return \"\";\n    var res = LZString._compress(input, 6, function(a){return keyStrBase64.charAt(a);});\n    switch (res.length % 4) { // To produce valid Base64\n    default: // When could this happen ?\n    case 0 : return res;\n    case 1 : return res+\"===\";\n    case 2 : return res+\"==\";\n    case 3 : return res+\"=\";\n    }\n  },\n\n  decompressFromBase64 : function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrBase64, input.charAt(index)); });\n  },\n\n  compressToUTF16 : function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 15, function(a){return f(a+32);}) + \" \";\n  },\n\n  decompressFromUTF16: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 16384, function(index) { return compressed.charCodeAt(index) - 32; });\n  },\n\n  //compress into uint8array (UCS-2 big endian format)\n  compressToUint8Array: function (uncompressed) {\n    var compressed = LZString.compress(uncompressed);\n    var buf=new Uint8Array(compressed.length*2); // 2 bytes per character\n\n    for (var i=0, TotalLen=compressed.length; i<TotalLen; i++) {\n      var current_value = compressed.charCodeAt(i);\n      buf[i*2] = current_value >>> 8;\n      buf[i*2+1] = current_value % 256;\n    }\n    return buf;\n  },\n\n  //decompress from uint8array (UCS-2 big endian format)\n  decompressFromUint8Array:function (compressed) {\n    if (compressed===null || compressed===undefined){\n        return LZString.decompress(compressed);\n    } else {\n        var buf=new Array(compressed.length/2); // 2 bytes per character\n        for (var i=0, TotalLen=buf.length; i<TotalLen; i++) {\n          buf[i]=compressed[i*2]*256+compressed[i*2+1];\n        }\n\n        var result = [];\n        buf.forEach(function (c) {\n          result.push(f(c));\n        });\n        return LZString.decompress(result.join(''));\n\n    }\n\n  },\n\n\n  //compress into a string that is already URI encoded\n  compressToEncodedURIComponent: function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 6, function(a){return keyStrUriSafe.charAt(a);});\n  },\n\n  //decompress from an output of compressToEncodedURIComponent\n  decompressFromEncodedURIComponent:function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    input = input.replace(/ /g, \"+\");\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrUriSafe, input.charAt(index)); });\n  },\n\n  compress: function (uncompressed) {\n    return LZString._compress(uncompressed, 16, function(a){return f(a);});\n  },\n  _compress: function (uncompressed, bitsPerChar, getCharFromInt) {\n    if (uncompressed == null) return \"\";\n    var i, value,\n        context_dictionary= {},\n        context_dictionaryToCreate= {},\n        context_c=\"\",\n        context_wc=\"\",\n        context_w=\"\",\n        context_enlargeIn= 2, // Compensate for the first entry which should not count\n        context_dictSize= 3,\n        context_numBits= 2,\n        context_data=[],\n        context_data_val=0,\n        context_data_position=0,\n        ii;\n\n    for (ii = 0; ii < uncompressed.length; ii += 1) {\n      context_c = uncompressed.charAt(ii);\n      if (!Object.prototype.hasOwnProperty.call(context_dictionary,context_c)) {\n        context_dictionary[context_c] = context_dictSize++;\n        context_dictionaryToCreate[context_c] = true;\n      }\n\n      context_wc = context_w + context_c;\n      if (Object.prototype.hasOwnProperty.call(context_dictionary,context_wc)) {\n        context_w = context_wc;\n      } else {\n        if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n          if (context_w.charCodeAt(0)<256) {\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<8 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          } else {\n            value = 1;\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1) | value;\n              if (context_data_position ==bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = 0;\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<16 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          }\n          context_enlargeIn--;\n          if (context_enlargeIn == 0) {\n            context_enlargeIn = Math.pow(2, context_numBits);\n            context_numBits++;\n          }\n          delete context_dictionaryToCreate[context_w];\n        } else {\n          value = context_dictionary[context_w];\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n\n\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        // Add wc to the dictionary.\n        context_dictionary[context_wc] = context_dictSize++;\n        context_w = String(context_c);\n      }\n    }\n\n    // Output the code for w.\n    if (context_w !== \"\") {\n      if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n        if (context_w.charCodeAt(0)<256) {\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<8 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        } else {\n          value = 1;\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | value;\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = 0;\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<16 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        delete context_dictionaryToCreate[context_w];\n      } else {\n        value = context_dictionary[context_w];\n        for (i=0 ; i<context_numBits ; i++) {\n          context_data_val = (context_data_val << 1) | (value&1);\n          if (context_data_position == bitsPerChar-1) {\n            context_data_position = 0;\n            context_data.push(getCharFromInt(context_data_val));\n            context_data_val = 0;\n          } else {\n            context_data_position++;\n          }\n          value = value >> 1;\n        }\n\n\n      }\n      context_enlargeIn--;\n      if (context_enlargeIn == 0) {\n        context_enlargeIn = Math.pow(2, context_numBits);\n        context_numBits++;\n      }\n    }\n\n    // Mark the end of the stream\n    value = 2;\n    for (i=0 ; i<context_numBits ; i++) {\n      context_data_val = (context_data_val << 1) | (value&1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data_position = 0;\n        context_data.push(getCharFromInt(context_data_val));\n        context_data_val = 0;\n      } else {\n        context_data_position++;\n      }\n      value = value >> 1;\n    }\n\n    // Flush the last char\n    while (true) {\n      context_data_val = (context_data_val << 1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data.push(getCharFromInt(context_data_val));\n        break;\n      }\n      else context_data_position++;\n    }\n    return context_data.join('');\n  },\n\n  decompress: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 32768, function(index) { return compressed.charCodeAt(index); });\n  },\n\n  _decompress: function (length, resetValue, getNextValue) {\n    var dictionary = [],\n        next,\n        enlargeIn = 4,\n        dictSize = 4,\n        numBits = 3,\n        entry = \"\",\n        result = [],\n        i,\n        w,\n        bits, resb, maxpower, power,\n        c,\n        data = {val:getNextValue(0), position:resetValue, index:1};\n\n    for (i = 0; i < 3; i += 1) {\n      dictionary[i] = i;\n    }\n\n    bits = 0;\n    maxpower = Math.pow(2,2);\n    power=1;\n    while (power!=maxpower) {\n      resb = data.val & data.position;\n      data.position >>= 1;\n      if (data.position == 0) {\n        data.position = resetValue;\n        data.val = getNextValue(data.index++);\n      }\n      bits |= (resb>0 ? 1 : 0) * power;\n      power <<= 1;\n    }\n\n    switch (next = bits) {\n      case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 2:\n        return \"\";\n    }\n    dictionary[3] = c;\n    w = c;\n    result.push(c);\n    while (true) {\n      if (data.index > length) {\n        return \"\";\n      }\n\n      bits = 0;\n      maxpower = Math.pow(2,numBits);\n      power=1;\n      while (power!=maxpower) {\n        resb = data.val & data.position;\n        data.position >>= 1;\n        if (data.position == 0) {\n          data.position = resetValue;\n          data.val = getNextValue(data.index++);\n        }\n        bits |= (resb>0 ? 1 : 0) * power;\n        power <<= 1;\n      }\n\n      switch (c = bits) {\n        case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 2:\n          return result.join('');\n      }\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n      if (dictionary[c]) {\n        entry = dictionary[c];\n      } else {\n        if (c === dictSize) {\n          entry = w + w.charAt(0);\n        } else {\n          return null;\n        }\n      }\n      result.push(entry);\n\n      // Add w+entry[0] to the dictionary.\n      dictionary[dictSize++] = w + entry.charAt(0);\n      enlargeIn--;\n\n      w = entry;\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n    }\n  }\n};\n  return LZString;\n})();\n\nif (typeof define === 'function' && define.amd) {\n  define(function () { return LZString; });\n} else if( typeof module !== 'undefined' && module != null ) {\n  module.exports = LZString\n}\n","import { compressToUTF16, decompressFromUTF16 } from 'lz-string';\n\nexport interface SavedItem {\n  name: string;\n  created: number;\n  lastModified: number;\n  key: string;\n}\n\ninterface SavedInfo {\n  numCreated: number;\n  data: SavedItem[];\n}\n\nconst KEY = 'tws-info';\nconst defaultInfo = JSON.stringify({ numCreated: 0, data: [] });\n\nexport const getInfo = (): SavedInfo =>\n  JSON.parse(localStorage.getItem(KEY) || defaultInfo);\n\nexport const setInfo = (info: SavedInfo) => {\n  localStorage.setItem(KEY, JSON.stringify(info));\n};\n\nexport const updateWriting = (key: string, str: string) => {\n  // save data (might need try/catch)\n  localStorage.setItem(key, compressToUTF16(str));\n};\n\nexport const create = (\n  str: string,\n  {\n    created = Date.now(),\n    lastModified = Date.now(),\n    name: givenName,\n  }: Partial<Pick<SavedItem, 'created' | 'lastModified' | 'name'>> = {}\n): string => {\n  const info = getInfo();\n  const numCreated = info.numCreated + 1;\n  const key = `tws-${numCreated}`;\n\n  updateWriting(key, str);\n\n  // update info\n  info.numCreated = numCreated;\n\n  info.data.push({\n    key,\n    created,\n    lastModified,\n    name: givenName || `Writing #${numCreated}`,\n  });\n\n  setInfo(info);\n\n  return key;\n};\n\n/** Gets details about a saved piece */\nexport const getDataById = (key: string): [SavedItem | null, number] => {\n  const info = getInfo();\n\n  for (let i = 0, len = info.data.length; i < len; i += 1) {\n    const data = info.data[i];\n    if (data.key === key) {\n      return [data, i];\n    }\n  }\n\n  return [null, -1];\n};\n\n/** Gets saved writing */\nexport const get = (key: string): string | null => {\n  // TODO: test when get returns null\n  const [data] = getDataById(key);\n\n  if (data) {\n    try {\n      const stored = localStorage.getItem(data.key) || '';\n      const uncompressed = decompressFromUTF16(stored);\n\n      return uncompressed;\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n    }\n  }\n\n  return null;\n};\n\n/** update details */\nexport const update = (key: string, updated: Pick<SavedItem, 'name'>): void => {\n  const [data, index] = getDataById(key);\n  if (data) {\n    data.name = updated.name;\n\n    const info = getInfo();\n\n    info.data[index] = data;\n\n    setInfo(info);\n  }\n};\n\nexport const deleteById = (key: string): void => {\n  const [, index] = getDataById(key);\n\n  if (index > -1) {\n    const info = getInfo();\n    const { key: _key } = info.data[index];\n\n    // remove saved item\n    localStorage.removeItem(_key);\n\n    info.data.splice(index, 1);\n    setInfo(info);\n  }\n};\n","import createElement from './utils/createElement';\n\nlet inputCount = 0;\n\n// TODO: add click on backdrop to close\nclass Dialog {\n  backdrop = createElement('div', {\n    className: 'backdrop dialog-backdrop',\n  });\n\n  dialog = createElement('div', {\n    className: 'popup dialog',\n  });\n\n  dialogForm = createElement('form', {\n    onsubmit: (e: Event) => {\n      e.preventDefault();\n      this.handleSubmit();\n    },\n  });\n\n  dialogFooter = createElement('div', {\n    className: 'dialog-footer',\n  });\n\n  /** used for tests */\n  submitButton: HTMLButtonElement;\n\n  /** used for tests */\n  cancelButton: HTMLButtonElement;\n\n  submitCallback: (a: any) => void | boolean = () => {};\n\n  cancelCallback: () => void | boolean = () => {};\n\n  closeCallback: () => void = () => {};\n\n  constructor(\n    title: string,\n    {\n      submit = 'OK',\n      cancel = 'Cancel',\n    }: {\n      submit?: string;\n      cancel?: string;\n    } = { submit: 'OK', cancel: 'Cancel' }\n  ) {\n    this.dialog.setAttribute('role', 'dialog');\n\n    this.dialog.appendChild(\n      createElement('header', {\n        className: 'dialog-header',\n        innerHTML: title,\n      })\n    );\n\n    const dialogBody = createElement('div', {\n      className: 'dialog-body',\n    });\n\n    dialogBody.appendChild(this.dialogForm);\n\n    this.dialog.appendChild(dialogBody);\n\n    this.submitButton = createElement('button', {\n      className: 'button button-primary',\n      type: 'button',\n      innerHTML: submit,\n      onclick: this.handleSubmit,\n    });\n\n    this.cancelButton = createElement('button', {\n      className: 'button',\n      type: 'button',\n      innerHTML: cancel,\n      onclick: () => {\n        // TODO: test this is called\n        this.cancelCallback();\n        this.close();\n      },\n    });\n\n    this.dialogFooter.appendChild(this.cancelButton);\n    this.dialogFooter.appendChild(this.submitButton);\n\n    this.dialog.appendChild(this.dialogFooter);\n    this.backdrop.appendChild(this.dialog);\n  }\n\n  get formData() {\n    const inputs = Array.from(this.dialogForm.elements) as HTMLInputElement[];\n    const obj: Record<string, any> = {};\n\n    for (const input of inputs) {\n      obj[input.name] = input.value;\n    }\n\n    return obj;\n  }\n\n  addFormElement = (label: string, elem: HTMLElement): this => {\n    inputCount += 1;\n    elem.setAttribute('id', `dialog-input-${inputCount}`);\n\n    const labelElem = createElement('label', {\n      htmlFor: elem.id,\n      innerHTML: label,\n    });\n\n    this.dialogForm.appendChild(labelElem);\n    this.dialogForm.appendChild(elem);\n\n    return this;\n  };\n\n  addInput(label: string, atts?: Partial<Writable<HTMLInputElement>>): this {\n    const input = createElement('input', atts);\n\n    return this.addFormElement(label, input);\n  }\n\n  addTextArea(\n    label: string,\n    atts?: Partial<Writable<HTMLTextAreaElement>>\n  ): this {\n    const textarea = createElement('textarea', atts);\n\n    return this.addFormElement(label, textarea);\n  }\n\n  handleSubmit = () => {\n    if (this.submitCallback(this.formData) !== false) {\n      this.close();\n    }\n  };\n\n  onSubmit = <T extends Record<string, any>>(\n    cb: (arg: T) => boolean | void\n  ): this => {\n    this.submitCallback = cb;\n\n    return this;\n  };\n\n  onCancel = (cb: this['cancelCallback']): this => {\n    this.cancelCallback = cb;\n\n    return this;\n  };\n\n  onClose = (cb: () => void): this => {\n    this.closeCallback = cb;\n\n    return this;\n  };\n\n  open() {\n    // console.log('Dialog');\n    // console.log('open');\n    document.body.appendChild(this.backdrop);\n\n    const firstInput = this.dialogForm.querySelector('input, textarea') as\n      | HTMLInputElement\n      | HTMLTextAreaElement;\n\n    firstInput?.focus();\n    firstInput?.select();\n  }\n\n  close() {\n    this.closeCallback();\n    this.backdrop?.parentNode?.removeChild(this.backdrop);\n  }\n}\n\nexport default Dialog;\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","const prettyDate = (date: number | Date): string =>\n  new Date(date).toLocaleString(undefined, {\n    day: 'numeric',\n    month: 'short',\n    year: 'numeric',\n  });\n\nexport default prettyDate;\n","export const downloadFile = (filename: string, data: string) => {\n  const a = document.createElement('a');\n  a.href = data;\n  a.rel = 'download';\n  a.download = filename;\n  a.click();\n};\n\nexport const JSONToFileString = (json: any): string =>\n  `data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(json))}`;\n","/** prompts for file and returns contents */\nconst getFileContents = (): Promise<string> =>\n  new Promise((resolve, reject) => {\n    const fileInput = document.createElement('input');\n    fileInput.type = 'file';\n\n    fileInput.onchange = (e) => {\n      const target = e.target as HTMLInputElement;\n      const { files } = target;\n      const file = files ? files[0] : null;\n\n      if (!file) {\n        return;\n      }\n\n      const reader = new FileReader();\n      reader.readAsText(file, 'UTF-8');\n\n      reader.onload = (readerEvent) => {\n        const content = readerEvent?.target?.result;\n\n        if (typeof content === 'string') {\n          resolve(content);\n        } else {\n          reject();\n        }\n      };\n\n      reader.onerror = reject;\n    };\n\n    fileInput.click();\n  });\n\nexport default getFileContents;\n","import * as Storage from '../Storage';\nimport { downloadFile, JSONToFileString } from './downloadFile';\nimport getFileContents from './getFileContents';\n\ninterface Exported {\n  data: ReturnType<typeof Storage.getInfo>['data'];\n  writings: string[];\n}\n\nexport const exportSaved = () => {\n  const output: Exported = {\n    data: Storage.getInfo().data,\n    writings: [],\n  };\n\n  if (output.data.length === 0) {\n    return;\n  }\n\n  for (const { key } of output.data) {\n    const writing = Storage.get(key);\n    if (writing) {\n      output.writings.push(writing);\n    }\n  }\n\n  const fileData = JSONToFileString(output);\n\n  downloadFile('tws.json', fileData);\n};\n\nexport const importSaved = async () => {\n  // file prompt\n  const contents = await getFileContents();\n\n  const { writings, data }: Exported = JSON.parse(contents);\n\n  // import to Storage\n  writings.forEach((writing, i) => {\n    Storage.create(writing, data[i]);\n  });\n};\n","import createElement from './utils/createElement';\nimport * as Storage from './Storage';\nimport prettyDate from './utils/prettyDate';\nimport { exportSaved, importSaved } from './utils/importExportSaved';\n\n// TODO: add search\n// TODO: add cancel button\nclass SavedList {\n  // TODO: might need to separate these backdrops into a new class\n  backdrop = createElement('div', {\n    className: 'backdrop dialog-backdrop',\n  });\n\n  dialog = createElement('div', {\n    className: 'popup dialog saved-list',\n  });\n\n  dialogBody = createElement('div', {\n    className: 'dialog-body',\n  });\n\n  dialogFooter = createElement('footer', {\n    className: 'dialog-footer',\n  });\n\n  exportButton: HTMLButtonElement;\n\n  importButton: HTMLButtonElement;\n\n  clickCallback: (si: Storage.SavedItem) => void | boolean = () => {};\n\n  editCallback: (si: Storage.SavedItem) => void | boolean = () => {};\n\n  deleteCallback: (si: Storage.SavedItem) => void | boolean = () => {};\n\n  closeCallback: () => void = () => {};\n\n  // TODO: might be able to extend from Dialog.ts\n  constructor(title: string) {\n    this.dialog.setAttribute('role', 'dialog');\n\n    this.dialog.appendChild(\n      createElement('header', {\n        className: 'dialog-header',\n        innerHTML: title,\n      })\n    );\n\n    this.backdrop.addEventListener('click', ({ target }) => {\n      if (target === this.backdrop) {\n        this.close();\n      }\n    });\n\n    // add action buttons to footer\n    this.exportButton = createElement('button', {\n      className: 'button',\n      type: 'button',\n      innerHTML: 'Export',\n      onclick: exportSaved,\n    });\n\n    this.importButton = createElement('button', {\n      className: 'button',\n      type: 'button',\n      innerHTML: 'import',\n      onclick: async () => {\n        try {\n          await importSaved();\n        } catch (e) {\n          // not sure\n        } finally {\n          this.refreshList();\n        }\n      },\n    });\n\n    const closeButton = createElement('button', {\n      className: 'button',\n      type: 'button',\n      innerHTML: 'Close',\n      onclick: this.close.bind(this),\n    });\n\n    this.refreshList();\n\n    this.dialogFooter.appendChild(this.exportButton);\n    this.dialogFooter.appendChild(this.importButton);\n    this.dialogFooter.appendChild(closeButton);\n    this.dialog.appendChild(this.dialogBody);\n    this.dialog.appendChild(this.dialogFooter);\n    this.backdrop.appendChild(this.dialog);\n  }\n\n  getSaved = (): HTMLElement[] => {\n    const saved = Storage.getInfo();\n\n    return saved.data.map(this.formatSaved);\n  };\n\n  formatSaved = (savedItem: Storage.SavedItem) => {\n    const { name, created } = savedItem;\n    const listitem = createElement('li', {\n      className: 'saved-item',\n      onclick: () => {\n        this.clickCallback(savedItem);\n        this.close();\n      },\n    });\n\n    const loadButton = createElement('span', {\n      className: 'saved-title-container',\n    });\n\n    const title = createElement('span', {\n      className: 'saved-title',\n      innerHTML: name,\n    });\n\n    const createdElem = createElement('span', {\n      className: 'saved-date-created',\n      innerHTML: prettyDate(created),\n      title: new Date(created).toLocaleString(),\n    });\n\n    loadButton.appendChild(title);\n    loadButton.appendChild(createdElem);\n\n    const edit = createElement('button', {\n      className: 'edit-saved',\n      innerHTML: '✏️',\n      onclick: (e) => {\n        // button is inside of view button :D\n        e.stopImmediatePropagation();\n        this.editCallback(savedItem);\n      },\n    });\n\n    const deleteItem = createElement('button', {\n      className: 'delete-saved',\n      innerHTML: '🗑',\n      onclick: (e) => {\n        // button is inside of view button :D\n        e.stopImmediatePropagation();\n        this.deleteCallback(savedItem);\n      },\n    });\n\n    listitem.appendChild(loadButton);\n    listitem.appendChild(edit);\n    listitem.appendChild(deleteItem);\n\n    return listitem;\n  };\n\n  destroy() {\n    this.backdrop.parentNode?.removeChild(this.backdrop);\n  }\n\n  onClick = (cb: this['clickCallback']): this => {\n    this.clickCallback = cb;\n\n    return this;\n  };\n\n  onEdit = (cb: this['editCallback']): this => {\n    this.editCallback = cb;\n\n    return this;\n  };\n\n  onDelete = (cb: this['deleteCallback']): this => {\n    this.deleteCallback = cb;\n\n    return this;\n  };\n\n  onClose = (cb: () => void): this => {\n    this.closeCallback = cb;\n\n    return this;\n  };\n\n  open() {\n    document.body.appendChild(this.backdrop);\n  }\n\n  close() {\n    this.closeCallback();\n    this.destroy();\n  }\n\n  clearList() {\n    for (const child of Array.from(this.dialogBody.children)) {\n      child.parentNode?.removeChild(child);\n    }\n  }\n\n  refreshList() {\n    const savedItems = this.getSaved();\n    const isEmpty = savedItems.length === 0;\n\n    this.exportButton.disabled = isEmpty;\n\n    this.clearList();\n\n    if (isEmpty) {\n      const emptyList = createElement('div', {\n        className: 'empty-list',\n        innerHTML: 'Nothing saved',\n      });\n\n      this.dialogBody.appendChild(emptyList);\n    } else {\n      // add list\n      const savedList = createElement('ul', {\n        className: 'saved-list',\n      });\n\n      for (const item of savedItems) {\n        savedList.appendChild(item);\n      }\n\n      this.dialogBody.appendChild(savedList);\n    }\n  }\n}\n\nexport default SavedList;\n","import Menu from './Menu';\nimport * as Storage from './Storage';\nimport Dialog from './Dialog';\nimport SavedList from './SavedList';\n\nconst menuEvent = (event: string) => {\n  window.gtag('event', event, {\n    event_category: 'menu',\n  });\n};\n\nconst getAppMenu = (app: import('./App').default) => {\n  const menu = new Menu();\n\n  let lastLoadedId: ReturnType<typeof Storage.create>;\n\n  menu.addMenuItem(\n    // '📃 &nbsp; New'\n    'New'\n    , {\n    callback: () => {\n      lastLoadedId = '';\n      menu.closeMenu();\n      app.reset();\n      menuEvent('menu:new');\n    },\n  });\n\n  menu.addMenuItem(\n    // '💾 &nbsp; Save'\n    'Save'\n    , {\n    // TODO: maybe should export all of these callbacks for testing\n    callback: () => {\n      // save and prompt edit modal\n      const exported = app.typewriter.export();\n\n      if (exported === '[]') {\n        // empty should not be saved\n        menu.closeMenu();\n        menuEvent('menu:save:empty');\n        return;\n      }\n\n      const id = lastLoadedId || Storage.create(exported);\n      let submit = 'Save Writing';\n      let cancel = 'Delete';\n\n      if (lastLoadedId) {\n        submit = 'Update Writing';\n        cancel = 'Discard Changes';\n      }\n\n      const [item] = Storage.getDataById(id);\n\n      menu.closeMenu();\n\n      new Dialog('Save', { submit, cancel })\n        .addInput('Name', {\n          type: 'text',\n          name: 'name',\n          value: item?.name,\n        })\n        .onSubmit(({ name }) => {\n          if (!name) {\n            // TODO: should return validation errors\n            return false;\n          }\n\n          if (lastLoadedId) {\n            // actually update\n            Storage.updateWriting(lastLoadedId, exported);\n          }\n\n          Storage.update(id, {\n            name,\n          });\n\n          menuEvent('menu:save:success');\n\n          return true;\n        })\n        .onCancel(() => {\n          // TODO: make sure you can't exit from clicking the backdrop\n          if (!lastLoadedId) {\n            // newly created should delete the writing\n            Storage.deleteById(id);\n          }\n          menuEvent('menu:save:cancel');\n        })\n        .open();\n    },\n  });\n\n  menu.addMenuItem(\n    // '👀 &nbsp; View Saved'\n    'View Saved'\n    , {\n    callback: () => {\n      menu.closeMenu();\n\n      menuEvent('menu:view-saved');\n\n      // const savedList = new SavedList('Saved Writings');\n      const savedList = new SavedList('Saved journals');\n      savedList\n        .onClick(({ key }) => {\n          const writing = Storage.get(key);\n\n          if (writing) {\n            app.typewriter.import(writing);\n            // handle save as if it may be update instead\n            lastLoadedId = key;\n            menuEvent('menu:view-saved:view');\n          } else {\n            // empty writings got no reason to live\n            Storage.deleteById(key);\n            menuEvent('menu:view-saved:delete-empty');\n          }\n        })\n        .onDelete(({ key }) => {\n          Storage.deleteById(key);\n          // refresh list\n          savedList.refreshList();\n\n          menuEvent('menu:view-saved:delete');\n        })\n        .onEdit(({ name, key }) => {\n          new Dialog('Update', { submit: 'Update Writing' })\n            .addInput('Name', {\n              type: 'text',\n              name: 'name',\n              value: name,\n            })\n            .onSubmit<{ name: string }>(({ name: newName }) => {\n              if (!newName) {\n                // TODO: should return validation errors\n                return false;\n              }\n\n              Storage.update(key, {\n                name: newName,\n              });\n\n              savedList.refreshList();\n\n              menuEvent('menu:view-saved:edit');\n\n              return true;\n            })\n            .open();\n        })\n        .onClose(() => {\n          app.focusText();\n          app.typewriter.cursor.draw();\n        })\n        .open();\n    },\n  });\n\n  // menu.addMenuItem('📋 &nbsp; Paste Text', {\n  //   callback: () => {\n  //     const pasteDialog = new Dialog('Paste Text');\n  //\n  //     menu.closeMenu();\n  //\n  //     menuEvent('menu:paste-text');\n  //\n  //     pasteDialog\n  //       .addTextArea('Text', {\n  //         name: 'content',\n  //       })\n  //       .onSubmit<{ content: string }>(({ content }) => {\n  //         const lines = content.split(/[\\r\\n]/);\n  //         const { typewriter } = app;\n  //         const { cursor } = typewriter;\n  //\n  //         typewriter.reset();\n  //\n  //         for (const line of lines) {\n  //           typewriter.addCharacter(line);\n  //           cursor.newline();\n  //         }\n  //       })\n  //       .open();\n  //   },\n  // });\n\n  // menu.addDivider();\n\n  // menu.addMenuItem('🙋‍♀️ &nbsp; App Feedback', {\n  //   href: 'https://github.com/bozdoz/typewritesomething/issues/new',\n  // });\n  //\n  // menu.addMenuItem('🥰 &nbsp; Sponsor Me', {\n  //   href: 'https://www.paypal.com/paypalme/bozdoz',\n  // });\n\n  return menu;\n};\n\nexport default getAppMenu;\n","// import MultiAudio from './utils/MultiAudio';\nimport NO_AUDIO from './helpers/NO_AUDIO';\nimport { TypeWriter } from './Typewriter';\nimport { container, textInput, cursorCanvas } from './helpers/getElements';\nimport positionElem from './utils/positionElem';\nimport getPositionFromEvent from './utils/getPositionFromEvent';\nimport Vector from './utils/Vector';\nimport Menu from './Menu';\nimport addLongTouch from './utils/addLongTouch';\nimport getAppMenu from './getAppMenu';\n\n// const isIos = /iPad|iPhone|iPod/.test(navigator.platform);\n\n// const keypressAudio = new MultiAudio(\n//   '/static/audio/keypress.mp3',\n//   // ios struggles with playing multi-audio; needs to have at most 3\n//   isIos ? 3 : 7\n// );\n// const newlineAudio = new MultiAudio('/static/audio/return.mp3', 2);\nconst eventTarget = cursorCanvas;\n\nclass App {\n  mousemovedelay = 150;\n\n  running = false;\n\n  typewriter = new TypeWriter();\n\n  menu: Menu | null = null;\n\n  removeLongTouch = () => {};\n\n  reset() {\n    this.running = true;\n    this.typewriter.reset();\n    this.events('on');\n    this.emptyText();\n    this.focusText();\n  }\n\n  start() {\n    if (this.running) return;\n\n    this.reset();\n\n    this.menu = getAppMenu(this);\n  }\n\n  stop() {\n    if (!this.running) return;\n    this.running = false;\n\n    // kill events\n    this.events('off');\n    this.removeMoveEvent();\n\n    this.menu?.destroy();\n\n    this.menu = null;\n  }\n\n  events = (onoff = 'on') => {\n    const documentEvents: Record<string, any> = {\n      mousedown: this.handleMouseDown,\n      touchstart: this.handleTouchStart,\n      mouseup: this.handleMouseUp,\n      touchend: this.handleMouseUp,\n    };\n    const cursorEvents: Record<string, any> = {\n      keydown: this.handleKeyDown,\n      keyup: this.handleKeyUp,\n      focus: this.handleFocus,\n      keypress: this.handleKeyPress,\n    };\n\n    const method = onoff === 'on' ? 'addEventListener' : 'removeEventListener';\n\n    // eslint-disable-next-line no-restricted-syntax, guard-for-in\n    for (const key in documentEvents) {\n      const fnc = documentEvents[key];\n      eventTarget[method](key, fnc);\n    }\n\n    // eslint-disable-next-line no-restricted-syntax, guard-for-in\n    for (const key in cursorEvents) {\n      const fnc = cursorEvents[key];\n      textInput[method](key, fnc);\n    }\n\n    if (onoff === 'on') {\n      // TODO: maybe move this event to Menu\n      this.removeLongTouch = addLongTouch(eventTarget, (e) => {\n        const position = getPositionFromEvent(e);\n\n        // remove mobile keyboard for css positioning of menu\n        textInput.blur();\n\n        this.menu?.openMenu(position);\n      });\n    } else {\n      this.removeLongTouch();\n      this.removeLongTouch = () => {};\n    }\n  };\n\n  pressedKeys: Record<string, boolean> = {};\n\n  /**\n   * keydown handles audio\n   * @param {KeyboardEvent} e\n   */\n  handleKeyDown = (e: KeyboardEvent) => {\n    const isMeta = e.altKey || e.ctrlKey || e.metaKey;\n    const noAudio: boolean | string = (NO_AUDIO as any)[e.which] || isMeta;\n    const isPressed = this.pressedKeys[e.code];\n\n    if (isPressed) {\n      return false;\n    }\n\n    if (!noAudio) {\n      this.pressedKeys[e.code] = true;\n\n      if (e.key === 'Enter') {\n        // newlineAudio.play();\n      } else {\n        // keypressAudio.play();\n      }\n      return true;\n    }\n\n    if (noAudio === 'TAB') {\n      // refocus\n      window.setTimeout(() => {\n        textInput.focus();\n      }, 10);\n      e.preventDefault();\n    }\n\n    return true;\n  };\n\n  handleKeyPress = (e: KeyboardEvent) => {\n    const isMeta = e.altKey || e.ctrlKey || e.metaKey;\n    const disable = e.key === 'Tab' || e.key === 'Enter';\n\n    if (disable || isMeta) {\n      e.preventDefault();\n    }\n\n    return !disable;\n  };\n\n  /**\n   * keyup handles character input and navigation\n   * @param {KeyboardEvent} e\n   */\n  handleKeyUp = (e: KeyboardEvent) => {\n    const { key, code } = e;\n    const ignoreKey = key === 'Shift';\n    const isMeta = e.altKey || e.ctrlKey || e.metaKey;\n\n    if (ignoreKey) {\n      return;\n    }\n\n    if (this.pressedKeys[code]) {\n      delete this.pressedKeys[code];\n    }\n\n    if (isMeta) {\n      // ignore if user is refreshing or navigating or something\n      this.emptyText();\n\n      return;\n    }\n\n    const { typewriter } = this;\n    const nav = typewriter.cursor.navButtons[key];\n    // TODO: add test for first character being set\n    // ignores first character, which should always be a single character\n    const letters = textInput.value.substr(1);\n\n    if (nav) {\n      nav();\n    } else if (letters) {\n      typewriter.addCharacter(letters);\n    }\n\n    this.emptyText();\n    // android needs to blur to remove autocomplete double-type\n    textInput.blur();\n    this.focusText();\n  };\n\n  handleFocus = () => {\n    this.focusText();\n  };\n\n  mouseuptimeout?: number;\n\n  mouseDownStartPos: Vector | null = null;\n\n  /**\n   * handleMouseDown\n   * @param {MouseEvent} e\n   */\n  handleMouseDown = (e: MouseEvent | TouchEvent) => {\n    // TODO: add menu somehow somewhere\n    // ignore right click\n    if ('button' in e && e.button === 2) return;\n\n    // mousemove would be expensive, so we add it only after the mouse is down\n    this.mouseuptimeout = window.setTimeout(() => {\n      this.mouseDownStartPos = getPositionFromEvent(e);\n\n      eventTarget.addEventListener('touchmove', this.handleMouseMove);\n      eventTarget.addEventListener('mousemove', this.handleMouseMove);\n    }, this.mousemovedelay);\n  };\n\n  /**\n   * handleTouchStart\n   * @param {TouchEvent} e\n   */\n  handleTouchStart = (e: TouchEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (e.touches && e.touches.length === 2) {\n      // todo: work on zooming\n      // (https://codepen.io/bozdoz/pen/xxEmJyx?editors=0011)\n\n      return true;\n    }\n\n    return this.handleMouseDown(e);\n  };\n\n  /**\n   * handleMouseMove\n   * @param {MouseEvent} e\n   */\n  handleMouseMove = (e: MouseEvent | TouchEvent) => {\n    // probably prevents browser zoom\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!this.mouseDownStartPos) {\n      return;\n    }\n\n    const _position = getPositionFromEvent(e)._subtract(this.mouseDownStartPos);\n\n    // fake canvas moving by cheaply altering css\n    positionElem(container, _position);\n\n    this.typewriter.cursor.clear();\n  };\n\n  /**\n   * handleMouseUp\n   * @param {MouseEvent} e\n   */\n  handleMouseUp = (e: MouseEvent | TouchEvent) => {\n    const rightClick = 'button' in e && e.button === 2;\n    const stillTouches = 'touches' in e && e.touches.length > 0;\n\n    if (rightClick || stillTouches) return;\n\n    this.removeMoveEvent();\n\n    const position = getPositionFromEvent(e);\n\n    if (this.mouseDownStartPos) {\n      // reposition canvas if mouse moved\n      position._subtract(this.mouseDownStartPos);\n\n      this.typewriter.reposition(position);\n      this.mouseDownStartPos = null;\n    } else {\n      // act as if it were just a click handler\n      this.updateCursor(position);\n    }\n  };\n\n  /**\n   * Updates cursor to a given position\n   * @param {Vector} position\n   */\n  updateCursor = (position: Vector) => {\n    this.typewriter.cursor.moveToClick(position);\n    this.focusText();\n  };\n\n  removeMoveEvent = () => {\n    window.clearTimeout(this.mouseuptimeout);\n    eventTarget.removeEventListener('touchmove', this.handleMouseMove);\n    eventTarget.removeEventListener('mousemove', this.handleMouseMove);\n  };\n\n  emptyText = () => {\n    // sets value to empty first to adjust for cursor location\n    textInput.value = '';\n    // leaves a character to disable automatic ProperCase in mobile\n    textInput.value = '=';\n  };\n\n  focusText = () => {\n    textInput.focus();\n    // TODO: reposition canvas to quasi-center textInput\n  };\n}\n\nexport default App;\n","const { search } = window.location;\nconst query = search\n  ? search\n      .substr(1)\n      .split('&')\n      .reduce((prev: Record<string, any>, cur) => {\n        const [key, val] = cur.split('=');\n        // eslint-disable-next-line no-param-reassign\n        prev[key] = val;\n\n        return prev;\n      }, {})\n  : {};\n\nconst isDebugMode = (): boolean => 'debug' in query;\n\nexport default isDebugMode;\n","interface GTag {\n  (...args: any[]): void;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\ndeclare interface Window {\n  dataLayer: any[];\n  gtag: GTag;\n}\n\nconst loadScript = (src: string) => {\n  const script = document.createElement('script');\n  const firstScript = document.getElementsByTagName('script')[0];\n  script.async = true;\n  script.src = src;\n  firstScript.parentNode!.insertBefore(script, firstScript);\n};\n\nif (process.env.NODE_ENV === 'production') {\n  // breaks down the snippet given by google analytics\n  loadScript('https://www.googletagmanager.com/gtag/js?id=UA-73887811-5');\n\n  window.dataLayer = window.dataLayer || [];\n\n  // eslint-disable-next-line no-inner-declarations\n  function gtag() {\n    // eslint-disable-next-line prefer-rest-params\n    window.dataLayer.push(arguments);\n  }\n\n  window.gtag = gtag;\n\n  window.gtag('js', new Date());\n\n  window.gtag('config', 'UA-73887811-5');\n} else {\n  // eslint-disable-next-line no-console\n  window.gtag = console.log;\n}\n","/**\n *\n * Inspired by a girl, Ms. Jayme Bergman\n *\n */\nimport App from './App';\nimport isDebugMode from './helpers/isDebugMode';\nimport './tracking/analytics';\n\nconst splash = document.getElementById('splash')!;\n\nconst startApp = (e: KeyboardEvent | MouseEvent | TouchEvent): void => {\n  if (e.altKey || e.ctrlKey || e.metaKey) {\n    // user might be trying to do something else\n    return;\n  }\n\n  splash.classList.add('hide');\n\n  splash.removeEventListener('click', startApp);\n  splash.removeEventListener('keyup', startApp);\n\n  const app = new App();\n\n  app.start();\n\n  // should be able to focus on ios so long as this\n  // is called from within a click handler\n  app.focusText();\n};\n\nconst onload = (): void => {\n  if (window.location.hash) {\n    window.location.hash = '';\n  }\n\n  splash.focus();\n\n  splash.addEventListener('click', startApp);\n  splash.addEventListener('keyup', startApp);\n\n  window.removeEventListener('load', onload);\n};\n\n/**\n * basic app handlers\n */\nwindow.addEventListener('load', onload);\n\n// Register service worker to control making site work offline\nif ('serviceWorker' in navigator && process.env.NODE_ENV === 'production') {\n  navigator.serviceWorker\n    .register('/sw.js')\n    .then((reg) => {\n      if (reg.installing) {\n        // eslint-disable-next-line no-console\n        console.log('Service worker installing');\n      } else if (reg.waiting) {\n        // eslint-disable-next-line no-console\n        console.log('Service worker installed');\n      } else if (reg.active) {\n        // eslint-disable-next-line no-console\n        console.log('Service worker active');\n      }\n    })\n    .catch((e): void => {\n      // eslint-disable-next-line no-console\n      console.error('Service Worker failed');\n      // eslint-disable-next-line no-console\n      console.error(e);\n    });\n}\n\n// TODO: add unit tests for debug mode\n// Mostly just debugs CSS for text-input\nif (isDebugMode()) {\n  document.body.classList.add('debug');\n}\n"],"names":["NO_AUDIO","Vector","constructor","x","y","add","vector","_add","subtract","_subtract","divideBy","num","multiplyBy","container","document","getElementById","textInput","textCanvas","cursorCanvas","textCtx","getContext","alpha","cursorCtx","positionElem","elem","style","transform","FONT_SIZE","containerScale","GLOBAL_ALPHA","letterSize","parseInt","String","Math","min","window","innerWidth","letterWidth","lineHeight","cursorWidth","cursorHeight","paddingVec","getPaddingVec","_x","_y","innerHeight","width","height","initialPosVec","Cursor","update","_pos","position","clearRect","vec","clear","draw","fillRect","_draw","clearTimeout","_cursorTimeout","_raf","cancelAnimationFrame","_opacity","setTimeout","fadeOut","bind","nudge","_time","Date","requestAnimationFrame","_fadeanim","dt","now","valueOf","newOpacity","save","globalAlpha","restore","Backspace","moveleft","Tab","addtab","ArrowLeft","ArrowUp","moveup","ArrowRight","moveright","ArrowDown","movedown","Enter","newline","ALPHA_MARGIN","ROTATE_MARGIN","TRANSLATE_MARGIN","randMargin","margin","max","value","random","Character","typewriter","charStr","canvasOffset","translate","rotate","fillText","s","debounce","fn","delay","timeOutId","args","TEXT_COLOR","CURSOR_COLOR","TypeWriter","_chars","undefined","chars","push","cursor","i","len","length","char","forEach","ctx","canvas","devicePixelRatio","setTransform","scale","font","textBaseline","fillStyle","resetCanvases","redraw","reposition","reset","setAttribute","_instance","addEventListener","debouncedReposition","export","JSON","stringify","map","import","str","parse","Array","isArray","addCharacter","e","console","error","getPositionFromEvent","touch","type","changedTouches","touches","pageX","pageY","addLongTouch","callback","timeout","onTouchStart","removeEventListener","createElement","tagname","params","key","typedKey","isAnchorElement","a","tagName","eventTarget","Menu","className","id","menu","contains","target","buffer","preventDefault","openMenu","gtag","event_category","closeMenu","events","tabIndex","menuBackdrop","appendChild","destroy","parentNode","removeChild","addMenuItem","innerHTML","href","menuItem","classList","addDivider","hr","onoff","method","contextmenu","handleContextMenu","body","handleClose","disabled","focus","onExit","remove","KEY","defaultInfo","numCreated","data","getInfo","localStorage","getItem","setInfo","info","setItem","updateWriting","compressToUTF16","create","created","lastModified","name","givenName","getDataById","get","stored","uncompressed","decompressFromUTF16","updated","index","deleteById","_key","removeItem","splice","inputCount","Dialog","title","submit","cancel","onsubmit","handleSubmit","label","labelElem","htmlFor","dialogForm","submitCallback","formData","close","cb","cancelCallback","closeCallback","dialog","dialogBody","submitButton","onclick","cancelButton","dialogFooter","backdrop","inputs","from","elements","obj","input","addInput","atts","addFormElement","addTextArea","textarea","open","firstInput","querySelector","select","prettyDate","date","toLocaleString","day","month","year","downloadFile","filename","rel","download","click","JSONToFileString","json","encodeURIComponent","getFileContents","Promise","resolve","reject","fileInput","onchange","files","file","reader","FileReader","readAsText","onload","readerEvent","content","result","onerror","exportSaved","output","Storage","writings","writing","fileData","importSaved","contents","SavedList","saved","formatSaved","savedItem","listitem","clickCallback","loadButton","createdElem","edit","stopImmediatePropagation","editCallback","deleteItem","deleteCallback","exportButton","importButton","refreshList","closeButton","clearList","child","children","savedItems","getSaved","isEmpty","emptyList","savedList","item","menuEvent","event","getAppMenu","app","lastLoadedId","exported","onSubmit","onCancel","onClick","onDelete","onEdit","newName","onClose","focusText","App","documentEvents","mousedown","handleMouseDown","touchstart","handleTouchStart","mouseup","handleMouseUp","touchend","cursorEvents","keydown","handleKeyDown","keyup","handleKeyUp","handleFocus","keypress","handleKeyPress","fnc","removeLongTouch","blur","isMeta","altKey","ctrlKey","metaKey","noAudio","which","isPressed","pressedKeys","code","disable","ignoreKey","emptyText","nav","navButtons","letters","substr","button","mouseuptimeout","mouseDownStartPos","handleMouseMove","mousemovedelay","stopPropagation","_position","rightClick","stillTouches","removeMoveEvent","updateCursor","moveToClick","running","start","stop","search","location","query","split","reduce","prev","cur","val","isDebugMode","log","splash","startApp","hash","navigator","serviceWorker","register","then","reg","installing","waiting","active","catch"],"mappings":";;AAAA;;;;AAIA,MAAMA,QAAQ,GAAyD;AACrE,KAAG,QADkE;AAErE,KAAG,WAFkE;AAGrE,KAAG,KAHkE;AAIrE,MAAI,OAJiE;AAKrE,MAAI,MALiE;AAMrE,MAAI,KANiE;AAOrE,MAAI,UAPiE;AAQrE,MAAI,KARiE;AASrE,MAAI,OATiE;AAUrE,MAAI,MAViE;AAWrE,MAAI,MAXiE;AAYrE,MAAI,KAZiE;AAarE,MAAI,MAbiE;AAcrE,MAAI,MAdiE;AAerE,MAAI,IAfiE;AAgBrE,MAAI,OAhBiE;AAiBrE,MAAI,MAjBiE;AAkBrE,MAAI,QAlBiE;AAmBrE,MAAI,KAnBiE;AAoBrE,MAAI,KApBiE;AAqBrE,MAAI,KArBiE;AAsBrE,OAAK,IAtBgE;AAuBrE,OAAK,IAvBgE;AAwBrE,OAAK,IAxBgE;AAyBrE,OAAK,IAzBgE;AA0BrE,OAAK,IA1BgE;AA2BrE,OAAK,IA3BgE;AA4BrE,OAAK,IA5BgE;AA6BrE,OAAK,IA7BgE;AA8BrE,OAAK,IA9BgE;AA+BrE,OAAK,KA/BgE;AAgCrE,OAAK,KAhCgE;AAiCrE,OAAK,KAjCgE;AAkCrE,OAAK,SAlCgE;AAmCrE,OAAK,YAnCgE;AAoCrE,OAAK;AApCgE,CAAvE;;ACJA,MAAMC,MAAN;AAKE;;;AAGAC,EAAAA,YAAYC,GAAWC;AACrB,SAAKD,CAAL,GAASA,CAAT;AACA,SAAKC,CAAL,GAASA,CAAT;AACD;;AAEDC,EAAAA,GAAG,CAACC,MAAD;AACD,QAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAgC;AAC9B,aAAO,IAAIL,MAAJ,CAAW,KAAKE,CAAL,GAASG,MAApB,EAA4B,KAAKF,CAAL,GAASE,MAArC,CAAP;AACD;;AACD,WAAO,IAAIL,MAAJ,CAAW,KAAKE,CAAL,GAASG,MAAM,CAACH,CAA3B,EAA8B,KAAKC,CAAL,GAASE,MAAM,CAACF,CAA9C,CAAP;AACD;;AAEDG,EAAAA,IAAI,CAACD,MAAD;AACF,SAAKH,CAAL,IAAU,OAAOG,MAAP,KAAkB,QAAlB,GAA6BA,MAA7B,GAAsCA,MAAM,CAACH,CAAvD;AACA,SAAKC,CAAL,IAAU,OAAOE,MAAP,KAAkB,QAAlB,GAA6BA,MAA7B,GAAsCA,MAAM,CAACF,CAAvD;AAEA,WAAO,IAAP;AACD;;AAEDI,EAAAA,QAAQ,CAACF,MAAD;AACN,QAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAgC;AAC9B,aAAO,IAAIL,MAAJ,CAAW,KAAKE,CAAL,GAASG,MAApB,EAA4B,KAAKF,CAAL,GAASE,MAArC,CAAP;AACD;;AACD,WAAO,IAAIL,MAAJ,CAAW,KAAKE,CAAL,GAASG,MAAM,CAACH,CAA3B,EAA8B,KAAKC,CAAL,GAASE,MAAM,CAACF,CAA9C,CAAP;AACD;;AAEDK,EAAAA,SAAS,CAACH,MAAD;AACP,SAAKH,CAAL,IAAU,OAAOG,MAAP,KAAkB,QAAlB,GAA6BA,MAA7B,GAAsCA,MAAM,CAACH,CAAvD;AACA,SAAKC,CAAL,IAAU,OAAOE,MAAP,KAAkB,QAAlB,GAA6BA,MAA7B,GAAsCA,MAAM,CAACF,CAAvD;AACA,WAAO,IAAP;AACD;;AAEDM,EAAAA,QAAQ,CAACC,GAAD;AACN,WAAO,IAAIV,MAAJ,CAAW,KAAKE,CAAL,GAASQ,GAApB,EAAyB,KAAKP,CAAL,GAASO,GAAlC,CAAP;AACD;;AAEDC,EAAAA,UAAU,CAACD,GAAD;AACR,WAAO,IAAIV,MAAJ,CAAW,KAAKE,CAAL,GAASQ,GAApB,EAAyB,KAAKP,CAAL,GAASO,GAAlC,CAAP;AACD;;;;AC9CI,MAAME,SAAS,GAAGC,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAlB;AACA,MAAMC,SAAS,GAAGF,QAAQ,CAACC,cAAT,CACvB,YADuB,CAAlB;AAGA,MAAME,UAAU,GAAGH,QAAQ,CAACC,cAAT,CACxB,aADwB,CAAnB;AAGA,MAAMG,YAAY,GAAGJ,QAAQ,CAACC,cAAT,CAC1B,eAD0B,CAArB;AAGA,MAAMI,OAAO,GAAGF,UAAU,CAACG,UAAX,CAAsB,IAAtB,EAA4B;AACjDC,EAAAA,KAAK,EAAE;AAD0C,CAA5B,CAAhB;AAGA,MAAMC,SAAS,GAAGJ,YAAY,CAACE,UAAb,CACvB,IADuB,CAAlB;;ACXP;AACA,MAAMG,YAAY,GAAG,CACnBC,IADmB;MAEnB;AAAErB,IAAAA,CAAF;AAAKC,IAAAA;AAAL;AAEA;AACAoB,EAAAA,IAAI,CAACC,KAAL,CAAWC,SAAX,uBAAoCvB,CAApC,iBAA4CC,CAA5C;AACD,CAND;;ACCA,MAAMuB,SAAS,GAAG,EAAlB;AACA,MAAMC,cAAc,GAAG,CAAvB;AACA,MAAMC,YAAY,GAAG,IAArB;AACA,MAAMC,UAAU,GAAGC,QAAQ,CACzBC,MAAM,CAACC,IAAI,CAACC,GAAL,CAASP,SAAT,EAAoBQ,MAAM,CAACC,UAAP,GAAoB,EAAxC,CAAD,CADmB,EAEzB,EAFyB,CAA3B;AAIA,MAAMC,WAAW,GAAIP,UAAU,GAAG,EAAd,GAAoB,EAAxC;AACA,MAAMQ,UAAU,GAAGR,UAAU,GAAG,CAAhC;AACA,MAAMS,WAAW,GAAGF,WAApB;AACA,MAAMG,YAAY,GAAGF,UAAU,GAAG,CAAlC;;AACA,MAAMG,UAAU,GAAI,SAASC,aAAT;AAClB,QAAMC,EAAE,GAAGV,IAAI,CAACC,GAAL,CAAS,GAAT,EAAcC,MAAM,CAACC,UAAP,GAAoB,CAAlC,CAAX;;AACA,QAAMQ,EAAE,GAAGX,IAAI,CAACC,GAAL,CAASS,EAAT,EAAaR,MAAM,CAACU,WAAP,GAAqB,CAAlC,CAAX;;AACA,SAAO,IAAI5C,MAAJ,CAAW0C,EAAX,EAAeC,EAAf,CAAP;AACD,CAJkB,EAAnB;;AAMA5B,SAAS,CAACS,KAAV,CAAgBqB,KAAhB,aAA2BP,WAA3B;AACAvB,SAAS,CAACS,KAAV,CAAgBsB,MAAhB,aAA4BP,YAA5B;;AAGA,MAAMQ,aAAa,GAAGP,UAAtB;MAEaQ;AAAb/C,EAAAA;AASE,iBAAA,GAAW8C,aAAX;;AAEA,cAAA,GAAQ;AACN,WAAKE,MAAL,CAAYF,aAAZ;AACD,KAFD;;AAIA,cAAA,GAAQ;AACN;AACA,YAAMG,IAAI,GAAG,KAAKC,QAAL,CAAc5C,QAAd,CAAuB,CAAvB,EAA0BE,QAA1B,CAAmCkB,cAAnC,CAAb;;;AAGA,YAAMkB,KAAK,GAAGP,WAAW,GAAG,CAA5B;AACA,YAAMQ,MAAM,GAAGP,YAAY,GAAG,CAA9B;AACAlB,MAAAA,SAAS,CAAC+B,SAAV,CAAoBF,IAAI,CAAChD,CAAzB,EAA4BgD,IAAI,CAAC/C,CAAjC,EAAoC0C,KAApC,EAA2CC,MAA3C;AACD,KARD;AAUA;;;;;AAGA,eAAA,GAAUO,GAAD;AACP;AACA;AACA/B,MAAAA,YAAY,CAACP,SAAD,EAAY;AACtBb,QAAAA,CAAC,EAAE8B,IAAI,CAACC,GAAL,CAASoB,GAAG,CAACnD,CAAb,EAAgBgC,MAAM,CAACC,UAAP,GAAoBG,WAApC,CADmB;AAEtBnC,QAAAA,CAAC,EAAE6B,IAAI,CAACC,GAAL,CAASoB,GAAG,CAAClD,CAAb,EAAgB+B,MAAM,CAACU,WAAvB;AAFmB,OAAZ,CAAZ;;AAMA,WAAKU,KAAL;;AAGA,WAAKH,QAAL,GAAgBE,GAAhB;;AAGA,WAAKE,IAAL;AACD,KAhBD;;AAkBA,cAAA,GAAQ;AACN;AACA,YAAML,IAAI,GAAG,KAAKC,QAAL,CAAc1C,QAAd,CAAuBkB,cAAvB,CAAb;;AAEAN,MAAAA,SAAS,CAACmC,QAAV,CAAmBN,IAAI,CAAChD,CAAxB,EAA2BgD,IAAI,CAAC/C,CAAhC,EAAmCmC,WAAnC,EAAgDC,YAAhD;AACD,KALD;;AAOA,aAAA,GAAO;AACL;AACA;AACA,WAAKkB,KAAL;AAGA;;;AACAvB,MAAAA,MAAM,CAACwB,YAAP,CAAoB,KAAKC,cAAzB;;AACA,UAAI,KAAKC,IAAT,EAAe;AACb1B,QAAAA,MAAM,CAAC2B,oBAAP,CAA4B,KAAKD,IAAjC;AACD;;AACD,WAAKE,QAAL,GAAgBlC,YAAhB;;AAKA,WAAK+B,cAAL,GAAsBzB,MAAM,CAAC6B,UAAP,CAAkB,KAAKC,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CAAlB,EAA2C,IAA3C,CAAtB;AACD,KAjBD;;AAmBA,cAAA,GAASZ,GAAD;AACN,WAAKJ,MAAL,CAAY,KAAKE,QAAL,CAAc/C,GAAd,CAAkBiD,GAAG,CAAC1C,UAAJ,CAAegB,cAAf,CAAlB,CAAZ;AACD,KAFD;;AAIA,iBAAA,GAAW;AACT,WAAKuC,KAAL,CAAW,IAAIlE,MAAJ,CAAW,CAACsC,WAAZ,EAAyB,CAAzB,CAAX;AACD,KAFD;;AAIA,kBAAA,GAAY;AACV,WAAK4B,KAAL,CAAW,IAAIlE,MAAJ,CAAWsC,WAAX,EAAwB,CAAxB,CAAX;AACD,KAFD;;AAIA,eAAA,GAAS;AACP,WAAK4B,KAAL,CAAW,IAAIlE,MAAJ,CAAW,CAAX,EAAc,CAACuC,YAAf,CAAX;AACD,KAFD;;AAIA,iBAAA,GAAW;AACT,WAAK2B,KAAL,CAAW,IAAIlE,MAAJ,CAAW,CAAX,EAAcuC,YAAd,CAAX;AACD,KAFD;AAIA;;;AACA,oBAAA,GAAec,GAAD;AACZ,WAAKJ,MAAL,CAAYI,GAAG,CAAC9C,QAAJ,CAAa,IAAIP,MAAJ,CAAWsC,WAAW,GAAG,CAAzB,EAA4BC,YAAY,GAAG,CAA3C,CAAb,CAAZ;AACD,KAFD;;AAIA,eAAA,GAAS;AACP,WAAK2B,KAAL,CAAW,IAAIlE,MAAJ,CAAWoC,WAAW,GAAG,CAAzB,EAA4B,CAA5B,CAAX;AACD,KAFD;;AAIA,gBAAA,GAAU;AACR,WAAKa,MAAL,CAAY,IAAIjD,MAAJ,CAAWwC,UAAU,CAACtC,CAAtB,EAAyB,KAAKiD,QAAL,CAAchD,CAAd,GAAkBkC,UAA3C,CAAZ;AACD,KAFD;;AAIA,gBAAA,GAAU;AACR;AACA,WAAK8B,KAAL,GAAa,IAAIC,IAAJ,EAAb;AACA,WAAKR,IAAL,GAAYS,qBAAqB,CAAC,KAAKC,SAAL,CAAeL,IAAf,CAAoB,IAApB,CAAD,CAAjC;AACD,KAJD;;AAMA,kBAAA,GAAY;AACV,YAAMM,EAAE,GAAGH,IAAI,CAACI,GAAL,KAAa,KAAKL,KAAL,CAAYM,OAAZ,EAAxB;;AACA,YAAMC,UAAU,GAAG,KAAKZ,QAAL,GAAkB,MAAMS,EAAP,GAAa,GAAjD;;AAEA,UAAIG,UAAU,IAAI,CAAlB,EAAqB;AACnB,aAAKpB,KAAL;AACD,OAFD,MAEO;AACLjC,QAAAA,SAAS,CAACsD,IAAV;AACA,aAAKrB,KAAL;AACA,aAAKQ,QAAL,GAAgBY,UAAhB;AACArD,QAAAA,SAAS,CAACuD,WAAV,GAAwB,KAAKd,QAA7B;;AACA,aAAKL,KAAL;;AACApC,QAAAA,SAAS,CAACwD,OAAV;AACA,aAAKjB,IAAL,GAAY1B,MAAM,CAACmC,qBAAP,CAA6B,KAAKC,SAAL,CAAeL,IAAf,CAAoB,IAApB,CAA7B,CAAZ;AACD;AACF,KAfD;AAiBA;;;AACA,mBAAA,GAA6E;AAC3Ea,MAAAA,SAAS,EAAE,KAAKC,QAAL,CAAcd,IAAd,CAAmB,IAAnB,CADgE;AAE3Ee,MAAAA,GAAG,EAAE,KAAKC,MAAL,CAAYhB,IAAZ,CAAiB,IAAjB,CAFsE;AAG3EiB,MAAAA,SAAS,EAAE,KAAKH,QAAL,CAAcd,IAAd,CAAmB,IAAnB,CAHgE;AAI3EkB,MAAAA,OAAO,EAAE,KAAKC,MAAL,CAAYnB,IAAZ,CAAiB,IAAjB,CAJkE;AAK3EoB,MAAAA,UAAU,EAAE,KAAKC,SAAL,CAAerB,IAAf,CAAoB,IAApB,CAL+D;AAM3EsB,MAAAA,SAAS,EAAE,KAAKC,QAAL,CAAcvB,IAAd,CAAmB,IAAnB,CANgE;AAO3EwB,MAAAA,KAAK,EAAE,KAAKC,OAAL,CAAazB,IAAb,CAAkB,IAAlB;AAPoE,KAA7E;AASD;;;;AClKD,MAAM0B,YAAY,GAAG,IAArB;AACA,MAAMC,aAAa,GAAG,IAAtB;AACA,MAAMC,gBAAgB,GAAG,GAAzB;AACA,MAAMjE,cAAY,GAAG,IAArB;;AAEA,SAASkE,UAAT,CAAoBpF,GAApB,EAAiCqF,MAAjC;AACE,QAAM9D,GAAG,GAAGvB,GAAG,GAAGqF,MAAlB;AACA,QAAMC,GAAG,GAAGtF,GAAG,GAAGqF,MAAlB;AACA,QAAME,KAAK,GAAGjE,IAAI,CAACkE,MAAL,MAAiBF,GAAG,GAAG/D,GAAvB,IAA8BA,GAA5C;AACA,SAAOgE,KAAP;AACD;;MAOYE,kBAAkBnG;AAS7BC,EAAAA,YACEmG,YACAC,SACA3D,IACAC;AAEA;AACA,UAAMmD,UAAU,CAACpD,EAAD,EAAKmD,gBAAL,CAAhB,EAAwCC,UAAU,CAACnD,EAAD,EAAKkD,gBAAL,CAAlD;;AAeF,aAAA,GAAO;AACL;AACA;AACA;AACA,YAAMxC,GAAG,GAAG,KAAKjD,GAAL,CAAS,KAAKgG,UAAL,CAAgBE,YAAzB,CAAZ;AAEA;AACA;;AACA,UAAIpF,OAAJ,EAAa;AACXA,QAAAA,OAAO,CAACyD,IAAR;AACAzD,QAAAA,OAAO,CAACqF,SAAR,CAAkBlD,GAAG,CAACnD,CAAtB,EAAyBmD,GAAG,CAAClD,CAA7B;AACAe,QAAAA,OAAO,CAACsF,MAAR,CAAe,KAAKA,MAApB;AACAtF,QAAAA,OAAO,CAAC0D,WAAR,GAAsB,KAAKxD,KAA3B;AACAF,QAAAA,OAAO,CAACuF,QAAR,CAAiB,KAAKC,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B;AACAxF,QAAAA,OAAO,CAAC2D,OAAR;AACD;AACF,KAhBD;;AAbE,SAAK6B,CAAL,GAASL,OAAT;AACA,SAAKG,MAAL,GAAcV,UAAU,CAAC,CAAD,EAAIF,aAAJ,CAAxB;AACA,SAAKxE,KAAL,GAAa0E,UAAU,CAAClE,cAAD,EAAe+D,YAAf,CAAvB;AACA,SAAKS,UAAL,GAAkBA,UAAlB;AAGA;AACA;;AACA,SAAK5F,SAAL,CAAe4F,UAAU,CAACE,YAA1B;;AAEA,SAAK/C,IAAL;AACD;;;;ACjDH,MAAMoD,QAAQ,GAAG,SAAXA,QAAW,CACfC,EADe;MAEfC,4EAAQ;AAER,MAAIC,SAAJ;AAEA,SAAO;sCAAIC;AAAAA,MAAAA;;;AACT,QAAID,SAAJ,EAAe;AACbpD,MAAAA,YAAY,CAACoD,SAAD,CAAZ;AACD;;AACDA,IAAAA,SAAS,GAAG5E,MAAM,CAAC6B,UAAP,CAAkB;AAC5B6C,MAAAA,EAAE,CAAC,GAAGG,IAAJ,CAAF;AACD,KAFW,EAETF,KAFS,CAAZ;AAGD,GAPD;AAQD,CAdD;;ACOA,MAAMnF,WAAS,GAAG,EAAlB;AACA,MAAMsF,UAAU,GAAG,SAAnB;AACA,MAAMC,YAAY,GAAG,SAArB;AACA,MAAMrF,cAAY,GAAG,IAArB;AACA,MAAMC,YAAU,GAAGC,QAAQ,CACzBC,MAAM,CAACC,IAAI,CAACC,GAAL,CAASP,WAAT,EAAoBQ,MAAM,CAACC,UAAP,GAAoB,EAAxC,CAAD,CADmB,EAEzB,EAFyB,CAA3B;MAoBa+E;AAWXjH,EAAAA;AARA,qBAAA,GAAe,IAAID,MAAJ,CAAW,CAAX,EAAc,CAAd,CAAf;AAEA,uBAAA,GAAiB,CAAjB;AAEA,cAAA,GAAqB,EAArB;AAEA,eAAA,GAAS,IAAIgD,MAAJ,EAAT;;AAaA,qBAAA,GAAe,CAACmE,MAAD,EAAiBzE,EAAjB,EAA8BC,EAA9B;AACb;AACA;AACA;AACA;AACA;AACA;AACA,UAAID,EAAE,KAAK0E,SAAP,IAAoBzE,EAAE,KAAKyE,SAA/B,EAA0C;AACxC,aAAKC,KAAL,CAAWC,IAAX,CAAgB,IAAInB,SAAJ,CAAc,IAAd,EAAoBgB,MAApB,EAA4BzE,EAA5B,EAAgCC,EAAhC,CAAhB;AACA,aAAK4E,MAAL,CAAYtE,MAAZ,CAAmB,IAAIjD,MAAJ,CAAW0C,EAAX,EAAeC,EAAf,CAAnB;AACA;AACD;AAED;;;AACA,WAAK,IAAI6E,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAGN,MAAM,CAACO,MAA7B,EAAqCF,CAAC,GAAGC,GAAzC,EAA8CD,CAAC,IAAI,CAAnD,EAAsD;AACpD,cAAM;AACJrE,UAAAA,QAAQ,EAAE;AAAEjD,YAAAA,CAAF;AAAKC,YAAAA;AAAL;AADN,YAEF,KAAKoH,MAFT;AAGA,cAAMI,IAAI,GAAGR,MAAM,CAACK,CAAD,CAAnB;AAEA,aAAKH,KAAL,CAAWC,IAAX,CAAgB,IAAInB,SAAJ,CAAc,IAAd,EAAoBwB,IAApB,EAA0BzH,CAA1B,EAA6BC,CAA7B,CAAhB;AACA,aAAKoH,MAAL,CAAYjC,SAAZ;AACD;;AAEF,KAxBD;;AA0BA,eAAA,GAAS;AACP;AACA;AACA,WAAK+B,KAAL,CAAWO,OAAX,CAAoBD,IAAD,IAAUA,IAAI,CAACpE,IAAL,EAA7B;AACD,KAJD;;AAMA,sBAAA,GAAgB;AACd,OAACrC,OAAD,EAAUG,SAAV,EAAqBuG,OAArB,CAA8BC,GAAD;AAC3B,cAAM;AAAEC,UAAAA;AAAF,YAAaD,GAAnB;AACA,cAAM;AAAEE,UAAAA,gBAAgB,GAAG,CAArB;AAAwB5F,UAAAA,UAAxB;AAAoCS,UAAAA;AAApC,YAAoDV,MAA1D;AAEA2F,QAAAA,GAAG,CAACG,YAAJ,CAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,EAA0B,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC;AAEAF,QAAAA,MAAM,CAACjF,KAAP,GAAeV,UAAU,GAAG4F,gBAA5B;AACAD,QAAAA,MAAM,CAAChF,MAAP,GAAgBF,WAAW,GAAGmF,gBAA9B;AACAD,QAAAA,MAAM,CAACtG,KAAP,CAAaqB,KAAb,aAAwBV,UAAxB;AACA2F,QAAAA,MAAM,CAACtG,KAAP,CAAasB,MAAb,aAAyBF,WAAzB;AAEAiF,QAAAA,GAAG,CAACI,KAAJ,CAAUF,gBAAV,EAA4BA,gBAA5B;AAEAF,QAAAA,GAAG,CAACjD,WAAJ,GAAkBhD,cAAlB;AACD,OAdD;;AAiBAV,MAAAA,OAAO,CAACgH,IAAR,aAAkBrG,YAAlB;AACAX,MAAAA,OAAO,CAACiH,YAAR,GAAuB,KAAvB;AACAjH,MAAAA,OAAO,CAACkH,SAAR,GAAoBpB,UAApB;AAEA3F,MAAAA,SAAS,CAAC+G,SAAV,GAAsBnB,YAAtB;AACA5F,MAAAA,SAAS,CAAC4G,KAAV,CAAgB,KAAKtG,cAArB,EAAqC,KAAKA,cAA1C;AACD,KAxBD;AA0BA;;;;;;;AAKA,mBAAA,GAAc0B,GAAD;AACX,UAAIA,GAAG,YAAYrD,MAAnB,EAA2B;AACzB,aAAKsG,YAAL,CAAkBhG,IAAlB,CAAuB+C,GAAvB;AACD;;AAED/B,MAAAA,YAAY,CAACV,SAAD,EAAY;AAAEV,QAAAA,CAAC,EAAE,CAAL;AAAQC,QAAAA,CAAC,EAAE;AAAX,OAAZ,CAAZ;AAEA,WAAKkI,aAAL;AACA,WAAKC,MAAL;AACD,KATD;;AAWA,4BAAA,GAAsB3B,QAAQ,CAAC,KAAK4B,UAAN,EAAkB,GAAlB,CAA9B;AAEA;;;;AAGA,cAAA,GAAQ;AACN,WAAKlB,KAAL,GAAa,EAAb;AACA,WAAKE,MAAL,CAAYiB,KAAZ;AACA,WAAKlC,YAAL,GAAoB,IAAItG,MAAJ,CAAW,CAAX,EAAc,CAAd,CAApB;AACA,WAAK2B,cAAL,GAAsB,CAAtB;AACAf,MAAAA,SAAS,CAAC6H,YAAV,CAAuB,OAAvB,EAAgC,EAAhC;AAEA,WAAKF,UAAL;AACA,WAAKhB,MAAL,CAAYhE,IAAZ;AACD,KATD;;AAzFE,QAAI2D,UAAU,CAACwB,SAAf,EAA0B;AACxB,aAAOxB,UAAU,CAACwB,SAAlB;AACD;;AAEDxB,IAAAA,UAAU,CAACwB,SAAX,GAAuB,IAAvB;;AAGAxG,IAAAA,MAAM,CAACyG,gBAAP,CAAwB,QAAxB,EAAkC,KAAKC,mBAAvC;AACD;;AA4FDC,EAAAA,MAAM;AACJ;AACA,WAAOC,IAAI,CAACC,SAAL,CACL,KAAK1B,KAAL,CAAW2B,GAAX,CAAe;AAAA,UAAC;AAAE9I,QAAAA,CAAF;AAAKC,QAAAA,CAAL;AAAQuG,QAAAA;AAAR,OAAD;AAAA,aAA6B;AAAExG,QAAAA,CAAF;AAAKC,QAAAA,CAAL;AAAQuG,QAAAA;AAAR,OAA7B;AAAA,KAAf,CADK,CAAP;AAGD;;AAEDuC,EAAAA,MAAM,CAACC,GAAD;AACJ,QAAI;AACF,YAAM7B,KAAK,GAAuCyB,IAAI,CAACK,KAAL,CAAWD,GAAX,CAAlD;;AAEA,UAAI,CAACE,KAAK,CAACC,OAAN,CAAchC,KAAd,CAAL,EAA2B;AACzB;AACD;;AAED,WAAKmB,KAAL;;AAEA,WAAK,MAAM;AAAE9B,QAAAA,CAAF;AAAKxG,QAAAA,CAAL;AAAQC,QAAAA;AAAR,OAAX,IAA0BkH,KAA1B,EAAiC;AAC/B,aAAKiC,YAAL,CAAkB5C,CAAlB,EAAqBxG,CAArB,EAAwBC,CAAxB;AACD;AACF,KAZD,CAYE,OAAOoJ,CAAP,EAAU;AACV;AACAC,MAAAA,OAAO,CAACC,KAAR,CAAc,kBAAd;AACD;AACF;;;;ACrKH,MAAMC,oBAAoB,GAAIH,CAAD;AAC3B,MAAI,aAAaA,CAAjB,EAAoB;AAClB,UAAMI,KAAK,GAAGJ,CAAC,CAACK,IAAF,KAAW,UAAX,GAAwBL,CAAC,CAACM,cAAF,CAAiB,CAAjB,CAAxB,GAA8CN,CAAC,CAACO,OAAF,CAAU,CAAV,CAA5D;AAEA,WAAO,IAAI9J,MAAJ,CAAW2J,KAAK,CAACI,KAAjB,EAAwBJ,KAAK,CAACK,KAA9B,CAAP;AACD;;AAED,SAAO,IAAIhK,MAAJ,CAAWuJ,CAAC,CAACQ,KAAb,EAAoBR,CAAC,CAACS,KAAtB,CAAP;AACD,CARD;;ACFA;;;;AAIA,MAAMC,YAAY,GAAG,SAAfA,YAAe,CACnB1I,IADmB,EAEnB2I,QAFmB;MAGnBrD,4EAAQ;AAER,MAAIsD,OAAJ;;AAEA,QAAM7G,KAAK,GAAG;AACZpB,IAAAA,MAAM,CAACwB,YAAP,CAAoByG,OAApB;AACAA,IAAAA,OAAO,GAAG,CAAV;AACD,GAHD;;AAKA,QAAMC,YAAY,GAAIb,CAAD;AACnB,QAAIA,CAAC,CAACO,OAAF,CAAUpC,MAAV,KAAqB,CAAzB,EAA4B;AAC1ByC,MAAAA,OAAO,GAAGjI,MAAM,CAAC6B,UAAP,CAAkB,MAAMmG,QAAQ,CAACX,CAAD,CAAhC,EAAqC1C,KAArC,CAAV;AACD,KAFD,MAEO,IAAIsD,OAAJ,EAAa;AAClB;AACA7G,MAAAA,KAAK;AACN;AACF,GAPD;;AASA/B,EAAAA,IAAI,CAACoH,gBAAL,CAAsB,YAAtB,EAAoCyB,YAApC;AACA7I,EAAAA,IAAI,CAACoH,gBAAL,CAAsB,WAAtB,EAAmCrF,KAAnC;AACA/B,EAAAA,IAAI,CAACoH,gBAAL,CAAsB,UAAtB,EAAkCrF,KAAlC;AAEA,SAAO;AACL/B,IAAAA,IAAI,CAAC8I,mBAAL,CAAyB,YAAzB,EAAuCD,YAAvC;AACA7I,IAAAA,IAAI,CAAC8I,mBAAL,CAAyB,WAAzB,EAAsC/G,KAAtC;AACA/B,IAAAA,IAAI,CAAC8I,mBAAL,CAAyB,UAAzB,EAAqC/G,KAArC;AACD,GAJD;AAKD,CA9BD;;ACJA,SAASgH,aAAT,CACEC,OADF,EAEEC,MAFF;AAIE,QAAMjJ,IAAI,GAAGV,QAAQ,CAACyJ,aAAT,CAAuBC,OAAvB,CAAb;;AAGA,OAAK,MAAME,GAAX,IAAkBD,MAAlB,EAA0B;AACxB,UAAME,QAAQ,GAAGD,GAAjB;AACClJ,IAAAA,IAAY,CAACmJ,QAAD,CAAZ,GAAyBF,MAAM,CAACE,QAAD,CAA/B;AACF;;AAED,SAAOnJ,IAAP;AACD;;ACHD,MAAMoJ,eAAe,GAAIC,CAAD,IACtBA,CAAC,CAACC,OAAF,KAAc,GADhB;;AAGA,MAAMC,WAAW,GAAG7J,YAApB;;AAEA,MAAM8J,IAAN;AAWE9K,EAAAA;AAVA,aAAA,GAAOqK,aAAa,CAAC,KAAD,EAAQ;AAC1BU,MAAAA,SAAS,EAAE,YADe;AAE1BC,MAAAA,EAAE,EAAE;AAFsB,KAAR,CAApB;AAKA,qBAAA,GAAeX,aAAa,CAAC,KAAD,EAAQ;AAClCU,MAAAA,SAAS,EAAE,wBADuB;AAElCC,MAAAA,EAAE,EAAE;AAF8B,KAAR,CAA5B;;AAqEA,0BAAA,GAAqB1B,CAAD;;;AAClB,UAAI,KAAK2B,IAAL,CAAUC,QAAV,CAAmB5B,CAAC,CAAC6B,MAArB,CAAJ,EAA0C;;AAG1C,YAAMC,MAAM,GAAG,CAAf;AACA,YAAM;AAAEnL,QAAAA,CAAF;AAAKC,QAAAA;AAAL,UAAWuJ,oBAAoB,CAACH,CAAD,CAApB,CAAwBnJ,GAAxB,CAA4BiL,MAA5B,CAAjB;AAEA9B,MAAAA,CAAC,CAAC+B,cAAF;AAEA,WAAKC,QAAL,CAAc;AAAErL,QAAAA,CAAF;AAAKC,QAAAA;AAAL,OAAd;AAEA,YAAA+B,MAAM,CAACsJ,IAAP,UAAA,iBAAA,SAAA,mBAAc,SAAS,aAAa;AAClCC,QAAAA,cAAc,EAAE;AADkB,QAApC;AAGD,KAdD;;AA4DA,oBAAA,GAAc;UAAC;AAAEL,QAAAA;AAAF;;AACb,UAAI,CAAC,KAAKF,IAAL,CAAUC,QAAV,CAAmBC,MAAnB,CAAL,EAAyC;AACvC,aAAKM,SAAL;AACD;AACF,KAJD;;AA3HE,SAAKC,MAAL,CAAY,IAAZ;AAEA,SAAKT,IAAL,CAAUzC,YAAV,CAAuB,MAAvB,EAA+B,MAA/B;AACA,SAAKyC,IAAL,CAAUU,QAAV,GAAqB,CAAC,CAAtB;AAEA,SAAKC,YAAL,CAAkBC,WAAlB,CAA8B,KAAKZ,IAAnC;AACD;;AAEDa,EAAAA,OAAO;;;AACL,SAAKJ,MAAL,CAAY,KAAZ;AACA,UAAA,KAAKE,YAAL,CAAkBG,UAAlB,UAAA,iBAAA,SAAA,MAA8BC,YAAY,KAAKJ,aAA/C;AACD;;AAEDK,EAAAA,WAAW,CAACC,SAAD;QAAoB;AAAEjC,MAAAA,QAAF;AAAYkC,MAAAA;AAAZ,4EAA+B;AAC5D,UAAM7B,OAAO,GAAG6B,IAAI,GAAG,GAAH,GAAS,KAA7B;AACA,UAAMC,QAAQ,GAAG/B,aAAa,CAACC,OAAD,EAAU;AACtC4B,MAAAA,SADsC;AAEtCnB,MAAAA,SAAS,EAAE;AAF2B,KAAV,CAA9B;;AAKA,QAAIL,eAAe,CAAC0B,QAAD,CAAnB,EAA+B;AAC7BA,MAAAA,QAAQ,CAACjB,MAAT,GAAkB,QAAlB;AACAiB,MAAAA,QAAQ,CAACD,IAAT,GAAgBA,IAAhB;AACD;;AAED,QAAIlC,QAAJ,EAAc;AACZmC,MAAAA,QAAQ,CAAC1D,gBAAT,CAA0B,OAA1B,EAAmCuB,QAAnC;AACAmC,MAAAA,QAAQ,CAAC1D,gBAAT,CAA0B,SAA1B,EAAsCY,CAAD;AACnC,YAAIA,CAAC,CAACkB,GAAF,KAAU,OAAd,EAAuB;AACrBP,UAAAA,QAAQ;AACT;AACF,OAJD;AAKD;;AAED,QAAIA,QAAQ,IAAIkC,IAAhB,EAAsB;AACpBC,MAAAA,QAAQ,CAACC,SAAT,CAAmBlM,GAAnB,CAAuB,WAAvB;AACAiM,MAAAA,QAAQ,CAACT,QAAT,GAAoB,CAApB;AACD;;AAEDS,IAAAA,QAAQ,CAAC5D,YAAT,CAAsB,MAAtB,EAA8B,UAA9B;AAEA,SAAKyC,IAAL,CAAUY,WAAV,CAAsBO,QAAtB;AACD;;AAEDE,EAAAA,UAAU;AACR,UAAMC,EAAE,GAAGlC,aAAa,CAAC,IAAD,CAAxB;AAEA,SAAKY,IAAL,CAAUY,WAAV,CAAsBU,EAAtB;AACD;;AAEDb,EAAAA,MAAM;QAACc,4EAAQ;AACb,UAAMC,MAAM,GAAGD,KAAK,KAAK,IAAV,GAAiB,kBAAjB,GAAsC,qBAArD;AAEA,UAAMd,MAAM,GAAgC;AAC1CgB,MAAAA,WAAW,EAAE,KAAKC;AADwB,KAA5C;;AAKA,SAAK,MAAMnC,GAAX,IAAkBkB,MAAlB,EAA0B;AACxBb,MAAAA,WAAW,CAAC4B,MAAD,CAAX,CAAoBjC,GAApB,EAAyBkB,MAAM,CAAClB,GAAD,CAA/B;AACD;AACF;;AAkBDc,EAAAA,QAAQ,CAACpI,QAAD;AACN,QAAI,KAAK0I,YAAL,CAAkBG,UAAlB,IAAgC,IAApC,EAA0C;AACxCnL,MAAAA,QAAQ,CAACgM,IAAT,CAAcf,WAAd,CAA0B,KAAKD,YAA/B;AACAhL,MAAAA,QAAQ,CAACgM,IAAT,CAAclE,gBAAd,CAA+B,OAA/B,EAAwC,KAAKmE,WAA7C;AACD;;AAEDxL,IAAAA,YAAY,CAAC,KAAK4J,IAAN,EAAY/H,QAAZ,CAAZ;;AAGApC,IAAAA,SAAS,CAAC6K,QAAV,GAAqB,CAAC,CAAtB;AACA7K,IAAAA,SAAS,CAACgM,QAAV,GAAqB,IAArB;AAEA,SAAK7B,IAAL,CAAU8B,KAAV;AACD;;AAEDtB,EAAAA,SAAS;AACP,UAAMnK,IAAI,GAAG,KAAKsK,YAAlB;;AAGA9K,IAAAA,SAAS,CAAC6K,QAAV,GAAqB,CAArB;AACA7K,IAAAA,SAAS,CAACgM,QAAV,GAAqB,KAArB;;AAGA,QAAI,CAACxL,IAAD,IAASA,IAAI,CAACyK,UAAL,IAAmB,IAAhC,EAAsC;AACpC;AACD;;;AAGDnL,IAAAA,QAAQ,CAACgM,IAAT,CAAcxC,mBAAd,CAAkC,OAAlC,EAA2C,KAAKyC,WAAhD;;AAGA,UAAMG,MAAM,GAAI1D,CAAD;;;AACb,UAAIA,CAAC,CAAC6B,MAAF,KAAa7J,IAAjB,EAAuB;AACvBA,MAAAA,IAAI,CAAC8I,mBAAL,CAAyB,cAAzB,EAAyC4C,MAAzC;AACA1L,MAAAA,IAAI,CAAC+K,SAAL,CAAeY,MAAf,CAAsB,MAAtB;AACA,YAAA3L,IAAI,CAACyK,UAAL,UAAA,iBAAA,SAAA,MAAiBC,YAAY1K,KAA7B;AACD,KALD;;AAOAA,IAAAA,IAAI,CAACoH,gBAAL,CAAsB,cAAtB,EAAsCsE,MAAtC;;AAGA1L,IAAAA,IAAI,CAAC+K,SAAL,CAAelM,GAAf,CAAmB,MAAnB;AACD;;;;;;;;;;ACpJH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,QAAQ,GAAG,CAAC,WAAW;AAC3B;AACA;AACA,IAAI,CAAC,GAAG,MAAM,CAAC,YAAY,CAAC;AAC5B,IAAI,YAAY,GAAG,mEAAmE,CAAC;AACvF,IAAI,aAAa,GAAG,mEAAmE,CAAC;AACxF,IAAI,cAAc,GAAG,EAAE,CAAC;AACxB;AACA,SAAS,YAAY,CAAC,QAAQ,EAAE,SAAS,EAAE;AAC3C,EAAE,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE;AACjC,IAAI,cAAc,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC;AAClC,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,EAAE;AAC5C,MAAM,cAAc,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACvD,KAAK;AACL,GAAG;AACH,EAAE,OAAO,cAAc,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,CAAC;AAC7C,CAAC;AACD;AACA,IAAI,QAAQ,GAAG;AACf,EAAE,gBAAgB,GAAG,UAAU,KAAK,EAAE;AACtC,IAAI,IAAI,KAAK,IAAI,IAAI,EAAE,OAAO,EAAE,CAAC;AACjC,IAAI,IAAI,GAAG,GAAG,QAAQ,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,OAAO,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACxF,IAAI,QAAQ,GAAG,CAAC,MAAM,GAAG,CAAC;AAC1B,IAAI,QAAQ;AACZ,IAAI,KAAK,CAAC,GAAG,OAAO,GAAG,CAAC;AACxB,IAAI,KAAK,CAAC,GAAG,OAAO,GAAG,CAAC,KAAK,CAAC;AAC9B,IAAI,KAAK,CAAC,GAAG,OAAO,GAAG,CAAC,IAAI,CAAC;AAC7B,IAAI,KAAK,CAAC,GAAG,OAAO,GAAG,CAAC,GAAG,CAAC;AAC5B,KAAK;AACL,GAAG;AACH;AACA,EAAE,oBAAoB,GAAG,UAAU,KAAK,EAAE;AAC1C,IAAI,IAAI,KAAK,IAAI,IAAI,EAAE,OAAO,EAAE,CAAC;AACjC,IAAI,IAAI,KAAK,IAAI,EAAE,EAAE,OAAO,IAAI,CAAC;AACjC,IAAI,OAAO,QAAQ,CAAC,WAAW,CAAC,KAAK,CAAC,MAAM,EAAE,EAAE,EAAE,SAAS,KAAK,EAAE,EAAE,OAAO,YAAY,CAAC,YAAY,EAAE,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AAC/H,GAAG;AACH;AACA,EAAE,eAAe,GAAG,UAAU,KAAK,EAAE;AACrC,IAAI,IAAI,KAAK,IAAI,IAAI,EAAE,OAAO,EAAE,CAAC;AACjC,IAAI,OAAO,QAAQ,CAAC,SAAS,CAAC,KAAK,EAAE,EAAE,EAAE,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;AAC7E,GAAG;AACH;AACA,EAAE,mBAAmB,EAAE,UAAU,UAAU,EAAE;AAC7C,IAAI,IAAI,UAAU,IAAI,IAAI,EAAE,OAAO,EAAE,CAAC;AACtC,IAAI,IAAI,UAAU,IAAI,EAAE,EAAE,OAAO,IAAI,CAAC;AACtC,IAAI,OAAO,QAAQ,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,EAAE,KAAK,EAAE,SAAS,KAAK,EAAE,EAAE,OAAO,UAAU,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;AACzH,GAAG;AACH;AACA;AACA,EAAE,oBAAoB,EAAE,UAAU,YAAY,EAAE;AAChD,IAAI,IAAI,UAAU,GAAG,QAAQ,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;AACrD,IAAI,IAAI,GAAG,CAAC,IAAI,UAAU,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;AAChD;AACA,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,CAAC,QAAQ,EAAE,CAAC,EAAE,EAAE;AAC/D,MAAM,IAAI,aAAa,GAAG,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AACnD,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,aAAa,KAAK,CAAC,CAAC;AACrC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,aAAa,GAAG,GAAG,CAAC;AACvC,KAAK;AACL,IAAI,OAAO,GAAG,CAAC;AACf,GAAG;AACH;AACA;AACA,EAAE,wBAAwB,CAAC,UAAU,UAAU,EAAE;AACjD,IAAI,IAAI,UAAU,GAAG,IAAI,IAAI,UAAU,GAAG,SAAS,CAAC;AACpD,QAAQ,OAAO,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;AAC/C,KAAK,MAAM;AACX,QAAQ,IAAI,GAAG,CAAC,IAAI,KAAK,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;AAC/C,QAAQ,KAAK,IAAI,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC,QAAQ,EAAE,CAAC,EAAE,EAAE;AAC5D,UAAU,GAAG,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACvD,SAAS;AACT;AACA,QAAQ,IAAI,MAAM,GAAG,EAAE,CAAC;AACxB,QAAQ,GAAG,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;AACjC,UAAU,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5B,SAAS,CAAC,CAAC;AACX,QAAQ,OAAO,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;AACpD;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE,6BAA6B,EAAE,UAAU,KAAK,EAAE;AAClD,IAAI,IAAI,KAAK,IAAI,IAAI,EAAE,OAAO,EAAE,CAAC;AACjC,IAAI,OAAO,QAAQ,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,OAAO,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACtF,GAAG;AACH;AACA;AACA,EAAE,iCAAiC,CAAC,UAAU,KAAK,EAAE;AACrD,IAAI,IAAI,KAAK,IAAI,IAAI,EAAE,OAAO,EAAE,CAAC;AACjC,IAAI,IAAI,KAAK,IAAI,EAAE,EAAE,OAAO,IAAI,CAAC;AACjC,IAAI,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;AACrC,IAAI,OAAO,QAAQ,CAAC,WAAW,CAAC,KAAK,CAAC,MAAM,EAAE,EAAE,EAAE,SAAS,KAAK,EAAE,EAAE,OAAO,YAAY,CAAC,aAAa,EAAE,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AAChI,GAAG;AACH;AACA,EAAE,QAAQ,EAAE,UAAU,YAAY,EAAE;AACpC,IAAI,OAAO,QAAQ,CAAC,SAAS,CAAC,YAAY,EAAE,EAAE,EAAE,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC3E,GAAG;AACH,EAAE,SAAS,EAAE,UAAU,YAAY,EAAE,WAAW,EAAE,cAAc,EAAE;AAClE,IAAI,IAAI,YAAY,IAAI,IAAI,EAAE,OAAO,EAAE,CAAC;AACxC,IAAI,IAAI,CAAC,EAAE,KAAK;AAChB,QAAQ,kBAAkB,EAAE,EAAE;AAC9B,QAAQ,0BAA0B,EAAE,EAAE;AACtC,QAAQ,SAAS,CAAC,EAAE;AACpB,QAAQ,UAAU,CAAC,EAAE;AACrB,QAAQ,SAAS,CAAC,EAAE;AACpB,QAAQ,iBAAiB,EAAE,CAAC;AAC5B,QAAQ,gBAAgB,EAAE,CAAC;AAC3B,QAAQ,eAAe,EAAE,CAAC;AAC1B,QAAQ,YAAY,CAAC,EAAE;AACvB,QAAQ,gBAAgB,CAAC,CAAC;AAC1B,QAAQ,qBAAqB,CAAC,CAAC;AAC/B,QAAQ,EAAE,CAAC;AACX;AACA,IAAI,KAAK,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,YAAY,CAAC,MAAM,EAAE,EAAE,IAAI,CAAC,EAAE;AACpD,MAAM,SAAS,GAAG,YAAY,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;AAC1C,MAAM,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,EAAE;AAC/E,QAAQ,kBAAkB,CAAC,SAAS,CAAC,GAAG,gBAAgB,EAAE,CAAC;AAC3D,QAAQ,0BAA0B,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;AACrD,OAAO;AACP;AACA,MAAM,UAAU,GAAG,SAAS,GAAG,SAAS,CAAC;AACzC,MAAM,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,EAAE;AAC/E,QAAQ,SAAS,GAAG,UAAU,CAAC;AAC/B,OAAO,MAAM;AACb,QAAQ,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,0BAA0B,CAAC,SAAS,CAAC,EAAE;AACxF,UAAU,IAAI,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE;AAC3C,YAAY,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,eAAe,GAAG,CAAC,EAAE,EAAE;AAChD,cAAc,gBAAgB,IAAI,gBAAgB,IAAI,CAAC,CAAC,CAAC;AACzD,cAAc,IAAI,qBAAqB,IAAI,WAAW,CAAC,CAAC,EAAE;AAC1D,gBAAgB,qBAAqB,GAAG,CAAC,CAAC;AAC1C,gBAAgB,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,CAAC;AACpE,gBAAgB,gBAAgB,GAAG,CAAC,CAAC;AACrC,eAAe,MAAM;AACrB,gBAAgB,qBAAqB,EAAE,CAAC;AACxC,eAAe;AACf,aAAa;AACb,YAAY,KAAK,GAAG,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AAC5C,YAAY,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,EAAE;AAClC,cAAc,gBAAgB,GAAG,CAAC,gBAAgB,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC;AACrE,cAAc,IAAI,qBAAqB,IAAI,WAAW,CAAC,CAAC,EAAE;AAC1D,gBAAgB,qBAAqB,GAAG,CAAC,CAAC;AAC1C,gBAAgB,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,CAAC;AACpE,gBAAgB,gBAAgB,GAAG,CAAC,CAAC;AACrC,eAAe,MAAM;AACrB,gBAAgB,qBAAqB,EAAE,CAAC;AACxC,eAAe;AACf,cAAc,KAAK,GAAG,KAAK,IAAI,CAAC,CAAC;AACjC,aAAa;AACb,WAAW,MAAM;AACjB,YAAY,KAAK,GAAG,CAAC,CAAC;AACtB,YAAY,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,eAAe,GAAG,CAAC,EAAE,EAAE;AAChD,cAAc,gBAAgB,GAAG,CAAC,gBAAgB,IAAI,CAAC,IAAI,KAAK,CAAC;AACjE,cAAc,IAAI,qBAAqB,GAAG,WAAW,CAAC,CAAC,EAAE;AACzD,gBAAgB,qBAAqB,GAAG,CAAC,CAAC;AAC1C,gBAAgB,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,CAAC;AACpE,gBAAgB,gBAAgB,GAAG,CAAC,CAAC;AACrC,eAAe,MAAM;AACrB,gBAAgB,qBAAqB,EAAE,CAAC;AACxC,eAAe;AACf,cAAc,KAAK,GAAG,CAAC,CAAC;AACxB,aAAa;AACb,YAAY,KAAK,GAAG,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AAC5C,YAAY,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE;AACnC,cAAc,gBAAgB,GAAG,CAAC,gBAAgB,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC;AACrE,cAAc,IAAI,qBAAqB,IAAI,WAAW,CAAC,CAAC,EAAE;AAC1D,gBAAgB,qBAAqB,GAAG,CAAC,CAAC;AAC1C,gBAAgB,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,CAAC;AACpE,gBAAgB,gBAAgB,GAAG,CAAC,CAAC;AACrC,eAAe,MAAM;AACrB,gBAAgB,qBAAqB,EAAE,CAAC;AACxC,eAAe;AACf,cAAc,KAAK,GAAG,KAAK,IAAI,CAAC,CAAC;AACjC,aAAa;AACb,WAAW;AACX,UAAU,iBAAiB,EAAE,CAAC;AAC9B,UAAU,IAAI,iBAAiB,IAAI,CAAC,EAAE;AACtC,YAAY,iBAAiB,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC;AAC7D,YAAY,eAAe,EAAE,CAAC;AAC9B,WAAW;AACX,UAAU,OAAO,0BAA0B,CAAC,SAAS,CAAC,CAAC;AACvD,SAAS,MAAM;AACf,UAAU,KAAK,GAAG,kBAAkB,CAAC,SAAS,CAAC,CAAC;AAChD,UAAU,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,eAAe,GAAG,CAAC,EAAE,EAAE;AAC9C,YAAY,gBAAgB,GAAG,CAAC,gBAAgB,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC;AACnE,YAAY,IAAI,qBAAqB,IAAI,WAAW,CAAC,CAAC,EAAE;AACxD,cAAc,qBAAqB,GAAG,CAAC,CAAC;AACxC,cAAc,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,CAAC;AAClE,cAAc,gBAAgB,GAAG,CAAC,CAAC;AACnC,aAAa,MAAM;AACnB,cAAc,qBAAqB,EAAE,CAAC;AACtC,aAAa;AACb,YAAY,KAAK,GAAG,KAAK,IAAI,CAAC,CAAC;AAC/B,WAAW;AACX;AACA;AACA,SAAS;AACT,QAAQ,iBAAiB,EAAE,CAAC;AAC5B,QAAQ,IAAI,iBAAiB,IAAI,CAAC,EAAE;AACpC,UAAU,iBAAiB,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC;AAC3D,UAAU,eAAe,EAAE,CAAC;AAC5B,SAAS;AACT;AACA,QAAQ,kBAAkB,CAAC,UAAU,CAAC,GAAG,gBAAgB,EAAE,CAAC;AAC5D,QAAQ,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC;AACtC,OAAO;AACP,KAAK;AACL;AACA;AACA,IAAI,IAAI,SAAS,KAAK,EAAE,EAAE;AAC1B,MAAM,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,0BAA0B,CAAC,SAAS,CAAC,EAAE;AACtF,QAAQ,IAAI,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE;AACzC,UAAU,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,eAAe,GAAG,CAAC,EAAE,EAAE;AAC9C,YAAY,gBAAgB,IAAI,gBAAgB,IAAI,CAAC,CAAC,CAAC;AACvD,YAAY,IAAI,qBAAqB,IAAI,WAAW,CAAC,CAAC,EAAE;AACxD,cAAc,qBAAqB,GAAG,CAAC,CAAC;AACxC,cAAc,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,CAAC;AAClE,cAAc,gBAAgB,GAAG,CAAC,CAAC;AACnC,aAAa,MAAM;AACnB,cAAc,qBAAqB,EAAE,CAAC;AACtC,aAAa;AACb,WAAW;AACX,UAAU,KAAK,GAAG,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AAC1C,UAAU,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,EAAE;AAChC,YAAY,gBAAgB,GAAG,CAAC,gBAAgB,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC;AACnE,YAAY,IAAI,qBAAqB,IAAI,WAAW,CAAC,CAAC,EAAE;AACxD,cAAc,qBAAqB,GAAG,CAAC,CAAC;AACxC,cAAc,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,CAAC;AAClE,cAAc,gBAAgB,GAAG,CAAC,CAAC;AACnC,aAAa,MAAM;AACnB,cAAc,qBAAqB,EAAE,CAAC;AACtC,aAAa;AACb,YAAY,KAAK,GAAG,KAAK,IAAI,CAAC,CAAC;AAC/B,WAAW;AACX,SAAS,MAAM;AACf,UAAU,KAAK,GAAG,CAAC,CAAC;AACpB,UAAU,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,eAAe,GAAG,CAAC,EAAE,EAAE;AAC9C,YAAY,gBAAgB,GAAG,CAAC,gBAAgB,IAAI,CAAC,IAAI,KAAK,CAAC;AAC/D,YAAY,IAAI,qBAAqB,IAAI,WAAW,CAAC,CAAC,EAAE;AACxD,cAAc,qBAAqB,GAAG,CAAC,CAAC;AACxC,cAAc,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,CAAC;AAClE,cAAc,gBAAgB,GAAG,CAAC,CAAC;AACnC,aAAa,MAAM;AACnB,cAAc,qBAAqB,EAAE,CAAC;AACtC,aAAa;AACb,YAAY,KAAK,GAAG,CAAC,CAAC;AACtB,WAAW;AACX,UAAU,KAAK,GAAG,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AAC1C,UAAU,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE;AACjC,YAAY,gBAAgB,GAAG,CAAC,gBAAgB,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC;AACnE,YAAY,IAAI,qBAAqB,IAAI,WAAW,CAAC,CAAC,EAAE;AACxD,cAAc,qBAAqB,GAAG,CAAC,CAAC;AACxC,cAAc,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,CAAC;AAClE,cAAc,gBAAgB,GAAG,CAAC,CAAC;AACnC,aAAa,MAAM;AACnB,cAAc,qBAAqB,EAAE,CAAC;AACtC,aAAa;AACb,YAAY,KAAK,GAAG,KAAK,IAAI,CAAC,CAAC;AAC/B,WAAW;AACX,SAAS;AACT,QAAQ,iBAAiB,EAAE,CAAC;AAC5B,QAAQ,IAAI,iBAAiB,IAAI,CAAC,EAAE;AACpC,UAAU,iBAAiB,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC;AAC3D,UAAU,eAAe,EAAE,CAAC;AAC5B,SAAS;AACT,QAAQ,OAAO,0BAA0B,CAAC,SAAS,CAAC,CAAC;AACrD,OAAO,MAAM;AACb,QAAQ,KAAK,GAAG,kBAAkB,CAAC,SAAS,CAAC,CAAC;AAC9C,QAAQ,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,eAAe,GAAG,CAAC,EAAE,EAAE;AAC5C,UAAU,gBAAgB,GAAG,CAAC,gBAAgB,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC;AACjE,UAAU,IAAI,qBAAqB,IAAI,WAAW,CAAC,CAAC,EAAE;AACtD,YAAY,qBAAqB,GAAG,CAAC,CAAC;AACtC,YAAY,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,CAAC;AAChE,YAAY,gBAAgB,GAAG,CAAC,CAAC;AACjC,WAAW,MAAM;AACjB,YAAY,qBAAqB,EAAE,CAAC;AACpC,WAAW;AACX,UAAU,KAAK,GAAG,KAAK,IAAI,CAAC,CAAC;AAC7B,SAAS;AACT;AACA;AACA,OAAO;AACP,MAAM,iBAAiB,EAAE,CAAC;AAC1B,MAAM,IAAI,iBAAiB,IAAI,CAAC,EAAE;AAClC,QAAQ,iBAAiB,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC;AACzD,QAAQ,eAAe,EAAE,CAAC;AAC1B,OAAO;AACP,KAAK;AACL;AACA;AACA,IAAI,KAAK,GAAG,CAAC,CAAC;AACd,IAAI,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,eAAe,GAAG,CAAC,EAAE,EAAE;AACxC,MAAM,gBAAgB,GAAG,CAAC,gBAAgB,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC;AAC7D,MAAM,IAAI,qBAAqB,IAAI,WAAW,CAAC,CAAC,EAAE;AAClD,QAAQ,qBAAqB,GAAG,CAAC,CAAC;AAClC,QAAQ,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,CAAC;AAC5D,QAAQ,gBAAgB,GAAG,CAAC,CAAC;AAC7B,OAAO,MAAM;AACb,QAAQ,qBAAqB,EAAE,CAAC;AAChC,OAAO;AACP,MAAM,KAAK,GAAG,KAAK,IAAI,CAAC,CAAC;AACzB,KAAK;AACL;AACA;AACA,IAAI,OAAO,IAAI,EAAE;AACjB,MAAM,gBAAgB,IAAI,gBAAgB,IAAI,CAAC,CAAC,CAAC;AACjD,MAAM,IAAI,qBAAqB,IAAI,WAAW,CAAC,CAAC,EAAE;AAClD,QAAQ,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,CAAC;AAC5D,QAAQ,MAAM;AACd,OAAO;AACP,WAAW,qBAAqB,EAAE,CAAC;AACnC,KAAK;AACL,IAAI,OAAO,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;AACjC,GAAG;AACH;AACA,EAAE,UAAU,EAAE,UAAU,UAAU,EAAE;AACpC,IAAI,IAAI,UAAU,IAAI,IAAI,EAAE,OAAO,EAAE,CAAC;AACtC,IAAI,IAAI,UAAU,IAAI,EAAE,EAAE,OAAO,IAAI,CAAC;AACtC,IAAI,OAAO,QAAQ,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,EAAE,KAAK,EAAE,SAAS,KAAK,EAAE,EAAE,OAAO,UAAU,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;AACpH,GAAG;AACH;AACA,EAAE,WAAW,EAAE,UAAU,MAAM,EAAE,UAAU,EAAE,YAAY,EAAE;AAC3D,QAAQ,UAAU,GAAG,EAAE;AACvB,QACQ,SAAS,GAAG,CAAC;AACrB,QAAQ,QAAQ,GAAG,CAAC;AACpB,QAAQ,OAAO,GAAG,CAAC;AACnB,QAAQ,KAAK,GAAG,EAAE;AAClB,QAAQ,MAAM,GAAG,EAAE;AACnB,QAAQ,CAAC;AACT,QAAQ,CAAC;AACT,QAAQ,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK;AACnC,QAAQ,CAAC;AACT,QAAQ,IAAI,GAAG,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC,EAAE;AACnE;AACA,IAAI,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE;AAC/B,MAAM,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACxB,KAAK;AACL;AACA,IAAI,IAAI,GAAG,CAAC,CAAC;AACb,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC7B,IAAI,KAAK,CAAC,CAAC,CAAC;AACZ,IAAI,OAAO,KAAK,EAAE,QAAQ,EAAE;AAC5B,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC;AACtC,MAAM,IAAI,CAAC,QAAQ,KAAK,CAAC,CAAC;AAC1B,MAAM,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,EAAE;AAC9B,QAAQ,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC;AACnC,QAAQ,IAAI,CAAC,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;AAC9C,OAAO;AACP,MAAM,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,KAAK,CAAC;AACvC,MAAM,KAAK,KAAK,CAAC,CAAC;AAClB,KAAK;AACL;AACA,IAAI,QAAe,IAAI;AACvB,MAAM,KAAK,CAAC;AACZ,UAAU,IAAI,GAAG,CAAC,CAAC;AACnB,UAAU,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACnC,UAAU,KAAK,CAAC,CAAC,CAAC;AAClB,UAAU,OAAO,KAAK,EAAE,QAAQ,EAAE;AAClC,YAAY,IAAI,GAAG,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC;AAC5C,YAAY,IAAI,CAAC,QAAQ,KAAK,CAAC,CAAC;AAChC,YAAY,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,EAAE;AACpC,cAAc,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC;AACzC,cAAc,IAAI,CAAC,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;AACpD,aAAa;AACb,YAAY,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,KAAK,CAAC;AAC7C,YAAY,KAAK,KAAK,CAAC,CAAC;AACxB,WAAW;AACX,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC;AACpB,QAAQ,MAAM;AACd,MAAM,KAAK,CAAC;AACZ,UAAU,IAAI,GAAG,CAAC,CAAC;AACnB,UAAU,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AACpC,UAAU,KAAK,CAAC,CAAC,CAAC;AAClB,UAAU,OAAO,KAAK,EAAE,QAAQ,EAAE;AAClC,YAAY,IAAI,GAAG,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC;AAC5C,YAAY,IAAI,CAAC,QAAQ,KAAK,CAAC,CAAC;AAChC,YAAY,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,EAAE;AACpC,cAAc,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC;AACzC,cAAc,IAAI,CAAC,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;AACpD,aAAa;AACb,YAAY,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,KAAK,CAAC;AAC7C,YAAY,KAAK,KAAK,CAAC,CAAC;AACxB,WAAW;AACX,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC;AACpB,QAAQ,MAAM;AACd,MAAM,KAAK,CAAC;AACZ,QAAQ,OAAO,EAAE,CAAC;AAClB,KAAK;AACL,IAAI,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACtB,IAAI,CAAC,GAAG,CAAC,CAAC;AACV,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACnB,IAAI,OAAO,IAAI,EAAE;AACjB,MAAM,IAAI,IAAI,CAAC,KAAK,GAAG,MAAM,EAAE;AAC/B,QAAQ,OAAO,EAAE,CAAC;AAClB,OAAO;AACP;AACA,MAAM,IAAI,GAAG,CAAC,CAAC;AACf,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;AACrC,MAAM,KAAK,CAAC,CAAC,CAAC;AACd,MAAM,OAAO,KAAK,EAAE,QAAQ,EAAE;AAC9B,QAAQ,IAAI,GAAG,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC;AACxC,QAAQ,IAAI,CAAC,QAAQ,KAAK,CAAC,CAAC;AAC5B,QAAQ,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,EAAE;AAChC,UAAU,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC;AACrC,UAAU,IAAI,CAAC,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;AAChD,SAAS;AACT,QAAQ,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,KAAK,CAAC;AACzC,QAAQ,KAAK,KAAK,CAAC,CAAC;AACpB,OAAO;AACP;AACA,MAAM,QAAQ,CAAC,GAAG,IAAI;AACtB,QAAQ,KAAK,CAAC;AACd,UAAU,IAAI,GAAG,CAAC,CAAC;AACnB,UAAU,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACnC,UAAU,KAAK,CAAC,CAAC,CAAC;AAClB,UAAU,OAAO,KAAK,EAAE,QAAQ,EAAE;AAClC,YAAY,IAAI,GAAG,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC;AAC5C,YAAY,IAAI,CAAC,QAAQ,KAAK,CAAC,CAAC;AAChC,YAAY,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,EAAE;AACpC,cAAc,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC;AACzC,cAAc,IAAI,CAAC,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;AACpD,aAAa;AACb,YAAY,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,KAAK,CAAC;AAC7C,YAAY,KAAK,KAAK,CAAC,CAAC;AACxB,WAAW;AACX;AACA,UAAU,UAAU,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC;AAC3C,UAAU,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;AACzB,UAAU,SAAS,EAAE,CAAC;AACtB,UAAU,MAAM;AAChB,QAAQ,KAAK,CAAC;AACd,UAAU,IAAI,GAAG,CAAC,CAAC;AACnB,UAAU,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AACpC,UAAU,KAAK,CAAC,CAAC,CAAC;AAClB,UAAU,OAAO,KAAK,EAAE,QAAQ,EAAE;AAClC,YAAY,IAAI,GAAG,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC;AAC5C,YAAY,IAAI,CAAC,QAAQ,KAAK,CAAC,CAAC;AAChC,YAAY,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,EAAE;AACpC,cAAc,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC;AACzC,cAAc,IAAI,CAAC,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;AACpD,aAAa;AACb,YAAY,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,KAAK,CAAC;AAC7C,YAAY,KAAK,KAAK,CAAC,CAAC;AACxB,WAAW;AACX,UAAU,UAAU,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC;AAC3C,UAAU,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;AACzB,UAAU,SAAS,EAAE,CAAC;AACtB,UAAU,MAAM;AAChB,QAAQ,KAAK,CAAC;AACd,UAAU,OAAO,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;AACjC,OAAO;AACP;AACA,MAAM,IAAI,SAAS,IAAI,CAAC,EAAE;AAC1B,QAAQ,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;AACzC,QAAQ,OAAO,EAAE,CAAC;AAClB,OAAO;AACP;AACA,MAAM,IAAI,UAAU,CAAC,CAAC,CAAC,EAAE;AACzB,QAAQ,KAAK,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;AAC9B,OAAO,MAAM;AACb,QAAQ,IAAI,CAAC,KAAK,QAAQ,EAAE;AAC5B,UAAU,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;AAClC,SAAS,MAAM;AACf,UAAU,OAAO,IAAI,CAAC;AACtB,SAAS;AACT,OAAO;AACP,MAAM,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACzB;AACA;AACA,MAAM,UAAU,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;AACnD,MAAM,SAAS,EAAE,CAAC;AAClB;AACA,MAAM,CAAC,GAAG,KAAK,CAAC;AAChB;AACA,MAAM,IAAI,SAAS,IAAI,CAAC,EAAE;AAC1B,QAAQ,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;AACzC,QAAQ,OAAO,EAAE,CAAC;AAClB,OAAO;AACP;AACA,KAAK;AACL,GAAG;AACH,CAAC,CAAC;AACF,EAAE,OAAO,QAAQ,CAAC;AAClB,CAAC,GAAG,CAAC;AACL;AAGO,KAAqC,MAAM,IAAI,IAAI,GAAG;AAC7D,EAAE,iBAAiB,SAAQ;AAC3B;;;ACteA,MAAM+M,GAAG,GAAG,UAAZ;AACA,MAAMC,WAAW,GAAGtE,IAAI,CAACC,SAAL,CAAe;AAAEsE,EAAAA,UAAU,EAAE,CAAd;AAAiBC,EAAAA,IAAI,EAAE;AAAvB,CAAf,CAApB;AAEO,MAAMC,OAAO,GAAG,MACrBzE,IAAI,CAACK,KAAL,CAAWqE,YAAY,CAACC,OAAb,CAAqBN,GAArB,KAA6BC,WAAxC,CADK;AAGA,MAAMM,OAAO,GAAIC,IAAD;AACrBH,EAAAA,YAAY,CAACI,OAAb,CAAqBT,GAArB,EAA0BrE,IAAI,CAACC,SAAL,CAAe4E,IAAf,CAA1B;AACD,CAFM;AAIA,MAAME,aAAa,GAAG,CAACpD,GAAD,EAAcvB,GAAd;AAC3B;AACAsE,EAAAA,YAAY,CAACI,OAAb,CAAqBnD,GAArB,EAA0BqD,wBAAe,CAAC5E,GAAD,CAAzC;AACD,CAHM;AAKA,MAAM6E,MAAM,GAAG,SAATA,MAAS,CACpB7E,GADoB;MAEpB;AACE8E,IAAAA,OAAO,GAAG5J,IAAI,CAACI,GAAL,EADZ;AAEEyJ,IAAAA,YAAY,GAAG7J,IAAI,CAACI,GAAL,EAFjB;AAGE0J,IAAAA,IAAI,EAAEC;AAHR,0EAImE;AAEnE,QAAMR,IAAI,GAAGJ,OAAO,EAApB;AACA,QAAMF,UAAU,GAAGM,IAAI,CAACN,UAAL,GAAkB,CAArC;AACA,QAAM5C,GAAG,iBAAU4C,UAAV,CAAT;AAEAQ,EAAAA,aAAa,CAACpD,GAAD,EAAMvB,GAAN,CAAb;;AAGAyE,EAAAA,IAAI,CAACN,UAAL,GAAkBA,UAAlB;AAEAM,EAAAA,IAAI,CAACL,IAAL,CAAUhG,IAAV,CAAe;AACbmD,IAAAA,GADa;AAEbuD,IAAAA,OAFa;AAGbC,IAAAA,YAHa;AAIbC,IAAAA,IAAI,EAAEC,SAAS,uBAAgBd,UAAhB;AAJF,GAAf;AAOAK,EAAAA,OAAO,CAACC,IAAD,CAAP;AAEA,SAAOlD,GAAP;AACD,CA3BM;AA6BP;;AACO,MAAM2D,WAAW,GAAI3D,GAAD;AACzB,QAAMkD,IAAI,GAAGJ,OAAO,EAApB;;AAEA,OAAK,IAAI/F,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAGkG,IAAI,CAACL,IAAL,CAAU5F,MAAhC,EAAwCF,CAAC,GAAGC,GAA5C,EAAiDD,CAAC,IAAI,CAAtD,EAAyD;AACvD,UAAM8F,IAAI,GAAGK,IAAI,CAACL,IAAL,CAAU9F,CAAV,CAAb;;AACA,QAAI8F,IAAI,CAAC7C,GAAL,KAAaA,GAAjB,EAAsB;AACpB,aAAO,CAAC6C,IAAD,EAAO9F,CAAP,CAAP;AACD;AACF;;AAED,SAAO,CAAC,IAAD,EAAO,CAAC,CAAR,CAAP;AACD,CAXM;AAaP;;AACO,MAAM6G,GAAG,GAAI5D,GAAD;AACjB;AACA,QAAM,CAAC6C,IAAD,IAASc,WAAW,CAAC3D,GAAD,CAA1B;;AAEA,MAAI6C,IAAJ,EAAU;AACR,QAAI;AACF,YAAMgB,MAAM,GAAGd,YAAY,CAACC,OAAb,CAAqBH,IAAI,CAAC7C,GAA1B,KAAkC,EAAjD;AACA,YAAM8D,YAAY,GAAGC,4BAAmB,CAACF,MAAD,CAAxC;AAEA,aAAOC,YAAP;AACD,KALD,CAKE,OAAOhF,CAAP,EAAU;AACV;AACAC,MAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACD;AACF;;AAED,SAAO,IAAP;AACD,CAjBM;AAmBP;;AACO,MAAMtG,MAAM,GAAG,CAACwH,GAAD,EAAcgE,OAAd;AACpB,QAAM,CAACnB,IAAD,EAAOoB,KAAP,IAAgBN,WAAW,CAAC3D,GAAD,CAAjC;;AACA,MAAI6C,IAAJ,EAAU;AACRA,IAAAA,IAAI,CAACY,IAAL,GAAYO,OAAO,CAACP,IAApB;AAEA,UAAMP,IAAI,GAAGJ,OAAO,EAApB;AAEAI,IAAAA,IAAI,CAACL,IAAL,CAAUoB,KAAV,IAAmBpB,IAAnB;AAEAI,IAAAA,OAAO,CAACC,IAAD,CAAP;AACD;AACF,CAXM;AAaA,MAAMgB,UAAU,GAAIlE,GAAD;AACxB,QAAM,GAAGiE,KAAH,IAAYN,WAAW,CAAC3D,GAAD,CAA7B;;AAEA,MAAIiE,KAAK,GAAG,CAAC,CAAb,EAAgB;AACd,UAAMf,IAAI,GAAGJ,OAAO,EAApB;AACA,UAAM;AAAE9C,MAAAA,GAAG,EAAEmE;AAAP,QAAgBjB,IAAI,CAACL,IAAL,CAAUoB,KAAV,CAAtB,CAFc;;AAKdlB,IAAAA,YAAY,CAACqB,UAAb,CAAwBD,IAAxB;AAEAjB,IAAAA,IAAI,CAACL,IAAL,CAAUwB,MAAV,CAAiBJ,KAAjB,EAAwB,CAAxB;AACAhB,IAAAA,OAAO,CAACC,IAAD,CAAP;AACD;AACF,CAbM;;ACxGP,IAAIoB,UAAU,GAAG,CAAjB;;AAGA,MAAMC,MAAN;AAgCE/O,EAAAA,YACEgP;QACA;AACEC,MAAAA,MAAM,GAAG,IADX;AAEEC,MAAAA,MAAM,GAAG;AAFX,4EAMI;AAAED,MAAAA,MAAM,EAAE,IAAV;AAAgBC,MAAAA,MAAM,EAAE;AAAxB;AAvCN,iBAAA,GAAW7E,aAAa,CAAC,KAAD,EAAQ;AAC9BU,MAAAA,SAAS,EAAE;AADmB,KAAR,CAAxB;AAIA,eAAA,GAASV,aAAa,CAAC,KAAD,EAAQ;AAC5BU,MAAAA,SAAS,EAAE;AADiB,KAAR,CAAtB;AAIA,mBAAA,GAAaV,aAAa,CAAC,MAAD,EAAS;AACjC8E,MAAAA,QAAQ,EAAG7F,CAAD;AACRA,QAAAA,CAAC,CAAC+B,cAAF;AACA,aAAK+D,YAAL;AACD;AAJgC,KAAT,CAA1B;AAOA,qBAAA,GAAe/E,aAAa,CAAC,KAAD,EAAQ;AAClCU,MAAAA,SAAS,EAAE;AADuB,KAAR,CAA5B;;AAUA,uBAAA,GAA6C,QAA7C;;AAEA,uBAAA,GAAuC,QAAvC;;AAEA,sBAAA,GAA4B,QAA5B;;AAiEA,uBAAA,GAAiB,CAACsE,KAAD,EAAgB/N,IAAhB;AACfwN,MAAAA,UAAU,IAAI,CAAd;AACAxN,MAAAA,IAAI,CAACkH,YAAL,CAAkB,IAAlB,yBAAwCsG,UAAxC;AAEA,YAAMQ,SAAS,GAAGjF,aAAa,CAAC,OAAD,EAAU;AACvCkF,QAAAA,OAAO,EAAEjO,IAAI,CAAC0J,EADyB;AAEvCkB,QAAAA,SAAS,EAAEmD;AAF4B,OAAV,CAA/B;AAKA,WAAKG,UAAL,CAAgB3D,WAAhB,CAA4ByD,SAA5B;AACA,WAAKE,UAAL,CAAgB3D,WAAhB,CAA4BvK,IAA5B;AAEA,aAAO,IAAP;AACD,KAbD;;AA8BA,qBAAA,GAAe;AACb,UAAI,KAAKmO,cAAL,CAAoB,KAAKC,QAAzB,MAAuC,KAA3C,EAAkD;AAChD,aAAKC,KAAL;AACD;AACF,KAJD;;AAMA,iBAAA,GACEC,EADS;AAGT,WAAKH,cAAL,GAAsBG,EAAtB;AAEA,aAAO,IAAP;AACD,KAND;;AAQA,iBAAA,GAAYA,EAAD;AACT,WAAKC,cAAL,GAAsBD,EAAtB;AAEA,aAAO,IAAP;AACD,KAJD;;AAMA,gBAAA,GAAWA,EAAD;AACR,WAAKE,aAAL,GAAqBF,EAArB;AAEA,aAAO,IAAP;AACD,KAJD;;AAvGE,SAAKG,MAAL,CAAYvH,YAAZ,CAAyB,MAAzB,EAAiC,QAAjC;AAEA,SAAKuH,MAAL,CAAYlE,WAAZ,CACExB,aAAa,CAAC,QAAD,EAAW;AACtBU,MAAAA,SAAS,EAAE,eADW;AAEtBmB,MAAAA,SAAS,EAAE8C;AAFW,KAAX,CADf;AAOA,UAAMgB,UAAU,GAAG3F,aAAa,CAAC,KAAD,EAAQ;AACtCU,MAAAA,SAAS,EAAE;AAD2B,KAAR,CAAhC;AAIAiF,IAAAA,UAAU,CAACnE,WAAX,CAAuB,KAAK2D,UAA5B;AAEA,SAAKO,MAAL,CAAYlE,WAAZ,CAAwBmE,UAAxB;AAEA,SAAKC,YAAL,GAAoB5F,aAAa,CAAC,QAAD,EAAW;AAC1CU,MAAAA,SAAS,EAAE,uBAD+B;AAE1CpB,MAAAA,IAAI,EAAE,QAFoC;AAG1CuC,MAAAA,SAAS,EAAE+C,MAH+B;AAI1CiB,MAAAA,OAAO,EAAE,KAAKd;AAJ4B,KAAX,CAAjC;AAOA,SAAKe,YAAL,GAAoB9F,aAAa,CAAC,QAAD,EAAW;AAC1CU,MAAAA,SAAS,EAAE,QAD+B;AAE1CpB,MAAAA,IAAI,EAAE,QAFoC;AAG1CuC,MAAAA,SAAS,EAAEgD,MAH+B;AAI1CgB,MAAAA,OAAO,EAAE;AACP;AACA,aAAKL,cAAL;AACA,aAAKF,KAAL;AACD;AARyC,KAAX,CAAjC;AAWA,SAAKS,YAAL,CAAkBvE,WAAlB,CAA8B,KAAKsE,YAAnC;AACA,SAAKC,YAAL,CAAkBvE,WAAlB,CAA8B,KAAKoE,YAAnC;AAEA,SAAKF,MAAL,CAAYlE,WAAZ,CAAwB,KAAKuE,YAA7B;AACA,SAAKC,QAAL,CAAcxE,WAAd,CAA0B,KAAKkE,MAA/B;AACD;;AAED,MAAIL,QAAJ;AACE,UAAMY,MAAM,GAAGnH,KAAK,CAACoH,IAAN,CAAW,KAAKf,UAAL,CAAgBgB,QAA3B,CAAf;AACA,UAAMC,GAAG,GAAwB,EAAjC;;AAEA,SAAK,MAAMC,KAAX,IAAoBJ,MAApB,EAA4B;AAC1BG,MAAAA,GAAG,CAACC,KAAK,CAACzC,IAAP,CAAH,GAAkByC,KAAK,CAAC1K,KAAxB;AACD;;AAED,WAAOyK,GAAP;AACD;;AAiBDE,EAAAA,QAAQ,CAACtB,KAAD,EAAgBuB,IAAhB;AACN,UAAMF,KAAK,GAAGrG,aAAa,CAAC,OAAD,EAAUuG,IAAV,CAA3B;AAEA,WAAO,KAAKC,cAAL,CAAoBxB,KAApB,EAA2BqB,KAA3B,CAAP;AACD;;AAEDI,EAAAA,WAAW,CACTzB,KADS,EAETuB,IAFS;AAIT,UAAMG,QAAQ,GAAG1G,aAAa,CAAC,UAAD,EAAauG,IAAb,CAA9B;AAEA,WAAO,KAAKC,cAAL,CAAoBxB,KAApB,EAA2B0B,QAA3B,CAAP;AACD;;AA4BDC,EAAAA,IAAI;AACF;AACA;AACApQ,IAAAA,QAAQ,CAACgM,IAAT,CAAcf,WAAd,CAA0B,KAAKwE,QAA/B;AAEA,UAAMY,UAAU,GAAG,KAAKzB,UAAL,CAAgB0B,aAAhB,CAA8B,iBAA9B,CAAnB;AAIAD,IAAAA,UAAU,SAAV,IAAAA,UAAU,WAAV,SAAA,GAAAA,UAAU,CAAElE,KAAZ,EAAA;AACAkE,IAAAA,UAAU,SAAV,IAAAA,UAAU,WAAV,SAAA,GAAAA,UAAU,CAAEE,MAAZ,EAAA;AACD;;AAEDxB,EAAAA,KAAK;;;AACH,SAAKG,aAAL;AACA,UAAA,MAAA,KAAKO,QAAL,UAAA,iBAAA,SAAA,MAAetE,UAAf,UAAA,iBAAA,SAAA,MAA2BC,YAAY,KAAKqE,SAA5C;AACD;;;;AC5KH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAqDA;AACO,SAAS,SAAS,CAAC,OAAO,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE;AAC7D,IAAI,SAAS,KAAK,CAAC,KAAK,EAAE,EAAE,OAAO,KAAK,YAAY,CAAC,GAAG,KAAK,GAAG,IAAI,CAAC,CAAC,UAAU,OAAO,EAAE,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;AAChH,IAAI,OAAO,KAAK,CAAC,KAAK,CAAC,GAAG,OAAO,CAAC,EAAE,UAAU,OAAO,EAAE,MAAM,EAAE;AAC/D,QAAQ,SAAS,SAAS,CAAC,KAAK,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE;AACnG,QAAQ,SAAS,QAAQ,CAAC,KAAK,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE;AACtG,QAAQ,SAAS,IAAI,CAAC,MAAM,EAAE,EAAE,MAAM,CAAC,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,EAAE;AACtH,QAAQ,IAAI,CAAC,CAAC,SAAS,GAAG,SAAS,CAAC,KAAK,CAAC,OAAO,EAAE,UAAU,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;AAC9E,KAAK,CAAC,CAAC;AACP;;AC3EA,MAAMe,UAAU,GAAIC,IAAD,IACjB,IAAIlN,IAAJ,CAASkN,IAAT,EAAeC,cAAf,CAA8BnK,SAA9B,EAAyC;AACvCoK,EAAAA,GAAG,EAAE,SADkC;AAEvCC,EAAAA,KAAK,EAAE,OAFgC;AAGvCC,EAAAA,IAAI,EAAE;AAHiC,CAAzC,CADF;;ACAO,MAAMC,YAAY,GAAG,CAACC,QAAD,EAAmBtE,IAAnB;AAC1B,QAAM1C,CAAC,GAAG/J,QAAQ,CAACyJ,aAAT,CAAuB,GAAvB,CAAV;AACAM,EAAAA,CAAC,CAACwB,IAAF,GAASkB,IAAT;AACA1C,EAAAA,CAAC,CAACiH,GAAF,GAAQ,UAAR;AACAjH,EAAAA,CAAC,CAACkH,QAAF,GAAaF,QAAb;AACAhH,EAAAA,CAAC,CAACmH,KAAF;AACD,CANM;AAQA,MAAMC,gBAAgB,GAAIC,IAAD,2CACEC,kBAAkB,CAACpJ,IAAI,CAACC,SAAL,CAAekJ,IAAf,CAAD,CADpB,CAAzB;;ACRP;AACA,MAAME,eAAe,GAAG,MACtB,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV;AACV,QAAMC,SAAS,GAAG1R,QAAQ,CAACyJ,aAAT,CAAuB,OAAvB,CAAlB;AACAiI,EAAAA,SAAS,CAAC3I,IAAV,GAAiB,MAAjB;;AAEA2I,EAAAA,SAAS,CAACC,QAAV,GAAsBjJ,CAAD;AACnB,UAAM6B,MAAM,GAAG7B,CAAC,CAAC6B,MAAjB;AACA,UAAM;AAAEqH,MAAAA;AAAF,QAAYrH,MAAlB;AACA,UAAMsH,IAAI,GAAGD,KAAK,GAAGA,KAAK,CAAC,CAAD,CAAR,GAAc,IAAhC;;AAEA,QAAI,CAACC,IAAL,EAAW;AACT;AACD;;AAED,UAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;AACAD,IAAAA,MAAM,CAACE,UAAP,CAAkBH,IAAlB,EAAwB,OAAxB;;AAEAC,IAAAA,MAAM,CAACG,MAAP,GAAiBC,WAAD;;;AACd,YAAMC,OAAO,GAAG,MAAAD,WAAW,SAAX,IAAAA,WAAW,WAAX,SAAA,GAAAA,WAAW,CAAE3H,MAAb,UAAA,iBAAA,SAAA,MAAqB6H,MAArC;;AAEA,UAAI,OAAOD,OAAP,KAAmB,QAAvB,EAAiC;AAC/BX,QAAAA,OAAO,CAACW,OAAD,CAAP;AACD,OAFD,MAEO;AACLV,QAAAA,MAAM;AACP;AACF,KARD;;AAUAK,IAAAA,MAAM,CAACO,OAAP,GAAiBZ,MAAjB;AACD,GAvBD;;AAyBAC,EAAAA,SAAS,CAACR,KAAV;AACD,CA9BD,CADF;;ACQO,MAAMoB,WAAW,GAAG;AACzB,QAAMC,MAAM,GAAa;AACvB9F,IAAAA,IAAI,EAAE+F,OAAA,GAAkB/F,IADD;AAEvBgG,IAAAA,QAAQ,EAAE;AAFa,GAAzB;;AAKA,MAAIF,MAAM,CAAC9F,IAAP,CAAY5F,MAAZ,KAAuB,CAA3B,EAA8B;AAC5B;AACD;;AAED,OAAK,MAAM;AAAE+C,IAAAA;AAAF,GAAX,IAAsB2I,MAAM,CAAC9F,IAA7B,EAAmC;AACjC,UAAMiG,OAAO,GAAGF,GAAA,CAAY5I,GAAZ,CAAhB;;AACA,QAAI8I,OAAJ,EAAa;AACXH,MAAAA,MAAM,CAACE,QAAP,CAAgBhM,IAAhB,CAAqBiM,OAArB;AACD;AACF;;AAED,QAAMC,QAAQ,GAAGxB,gBAAgB,CAACoB,MAAD,CAAjC;AAEAzB,EAAAA,YAAY,CAAC,UAAD,EAAa6B,QAAb,CAAZ;AACD,CApBM;AAsBA,MAAMC,WAAW,GAAG;AACzB;AACA,QAAMC,QAAQ,GAAG,MAAMvB,eAAe,EAAtC;AAEA,QAAM;AAAEmB,IAAAA,QAAF;AAAYhG,IAAAA;AAAZ,MAA+BxE,IAAI,CAACK,KAAL,CAAWuK,QAAX,CAArC;;AAGAJ,EAAAA,QAAQ,CAAC1L,OAAT,CAAiB,CAAC2L,OAAD,EAAU/L,CAAV;AACf6L,IAAAA,MAAA,CAAeE,OAAf,EAAwBjG,IAAI,CAAC9F,CAAD,CAA5B;AACD,GAFD;AAGD,EAVM;;ACzBP;;AACA,MAAMmM,SAAN;AA8BE;AACA1T,EAAAA,YAAYgP;AA9BZ;AACA,iBAAA,GAAW3E,aAAa,CAAC,KAAD,EAAQ;AAC9BU,MAAAA,SAAS,EAAE;AADmB,KAAR,CAAxB;AAIA,eAAA,GAASV,aAAa,CAAC,KAAD,EAAQ;AAC5BU,MAAAA,SAAS,EAAE;AADiB,KAAR,CAAtB;AAIA,mBAAA,GAAaV,aAAa,CAAC,KAAD,EAAQ;AAChCU,MAAAA,SAAS,EAAE;AADqB,KAAR,CAA1B;AAIA,qBAAA,GAAeV,aAAa,CAAC,QAAD,EAAW;AACrCU,MAAAA,SAAS,EAAE;AAD0B,KAAX,CAA5B;;AAQA,sBAAA,GAA2D,QAA3D;;AAEA,qBAAA,GAA0D,QAA1D;;AAEA,uBAAA,GAA4D,QAA5D;;AAEA,sBAAA,GAA4B,QAA5B;;AA2DA,iBAAA,GAAW;AACT,YAAM4I,KAAK,GAAGP,OAAA,EAAd;AAEA,aAAOO,KAAK,CAACtG,IAAN,CAAWtE,GAAX,CAAe,KAAK6K,WAApB,CAAP;AACD,KAJD;;AAMA,oBAAA,GAAeC,SAAD;AACZ,YAAM;AAAE5F,QAAAA,IAAF;AAAQF,QAAAA;AAAR,UAAoB8F,SAA1B;AACA,YAAMC,QAAQ,GAAGzJ,aAAa,CAAC,IAAD,EAAO;AACnCU,QAAAA,SAAS,EAAE,YADwB;AAEnCmF,QAAAA,OAAO,EAAE;AACP,eAAK6D,aAAL,CAAmBF,SAAnB;AACA,eAAKlE,KAAL;AACD;AALkC,OAAP,CAA9B;AAQA,YAAMqE,UAAU,GAAG3J,aAAa,CAAC,MAAD,EAAS;AACvCU,QAAAA,SAAS,EAAE;AAD4B,OAAT,CAAhC;AAIA,YAAMiE,KAAK,GAAG3E,aAAa,CAAC,MAAD,EAAS;AAClCU,QAAAA,SAAS,EAAE,aADuB;AAElCmB,QAAAA,SAAS,EAAE+B;AAFuB,OAAT,CAA3B;AAKA,YAAMgG,WAAW,GAAG5J,aAAa,CAAC,MAAD,EAAS;AACxCU,QAAAA,SAAS,EAAE,oBAD6B;AAExCmB,QAAAA,SAAS,EAAEkF,UAAU,CAACrD,OAAD,CAFmB;AAGxCiB,QAAAA,KAAK,EAAE,IAAI7K,IAAJ,CAAS4J,OAAT,EAAkBuD,cAAlB;AAHiC,OAAT,CAAjC;AAMA0C,MAAAA,UAAU,CAACnI,WAAX,CAAuBmD,KAAvB;AACAgF,MAAAA,UAAU,CAACnI,WAAX,CAAuBoI,WAAvB;AAEA,YAAMC,IAAI,GAAG7J,aAAa,CAAC,QAAD,EAAW;AACnCU,QAAAA,SAAS,EAAE,YADwB;AAEnCmB,QAAAA,SAAS,EAAE,IAFwB;AAGnCgE,QAAAA,OAAO,EAAG5G,CAAD;AACP;AACAA,UAAAA,CAAC,CAAC6K,wBAAF;AACA,eAAKC,YAAL,CAAkBP,SAAlB;AACD;AAPkC,OAAX,CAA1B;AAUA,YAAMQ,UAAU,GAAGhK,aAAa,CAAC,QAAD,EAAW;AACzCU,QAAAA,SAAS,EAAE,cAD8B;AAEzCmB,QAAAA,SAAS,EAAE,IAF8B;AAGzCgE,QAAAA,OAAO,EAAG5G,CAAD;AACP;AACAA,UAAAA,CAAC,CAAC6K,wBAAF;AACA,eAAKG,cAAL,CAAoBT,SAApB;AACD;AAPwC,OAAX,CAAhC;AAUAC,MAAAA,QAAQ,CAACjI,WAAT,CAAqBmI,UAArB;AACAF,MAAAA,QAAQ,CAACjI,WAAT,CAAqBqI,IAArB;AACAJ,MAAAA,QAAQ,CAACjI,WAAT,CAAqBwI,UAArB;AAEA,aAAOP,QAAP;AACD,KArDD;;AA2DA,gBAAA,GAAWlE,EAAD;AACR,WAAKmE,aAAL,GAAqBnE,EAArB;AAEA,aAAO,IAAP;AACD,KAJD;;AAMA,eAAA,GAAUA,EAAD;AACP,WAAKwE,YAAL,GAAoBxE,EAApB;AAEA,aAAO,IAAP;AACD,KAJD;;AAMA,iBAAA,GAAYA,EAAD;AACT,WAAK0E,cAAL,GAAsB1E,EAAtB;AAEA,aAAO,IAAP;AACD,KAJD;;AAMA,gBAAA,GAAWA,EAAD;AACR,WAAKE,aAAL,GAAqBF,EAArB;AAEA,aAAO,IAAP;AACD,KAJD;;AA1IE,SAAKG,MAAL,CAAYvH,YAAZ,CAAyB,MAAzB,EAAiC,QAAjC;AAEA,SAAKuH,MAAL,CAAYlE,WAAZ,CACExB,aAAa,CAAC,QAAD,EAAW;AACtBU,MAAAA,SAAS,EAAE,eADW;AAEtBmB,MAAAA,SAAS,EAAE8C;AAFW,KAAX,CADf;AAOA,SAAKqB,QAAL,CAAc3H,gBAAd,CAA+B,OAA/B,EAAwC;UAAC;AAAEyC,QAAAA;AAAF;;AACvC,UAAIA,MAAM,KAAK,KAAKkF,QAApB,EAA8B;AAC5B,aAAKV,KAAL;AACD;AACF,KAJD;;AAOA,SAAK4E,YAAL,GAAoBlK,aAAa,CAAC,QAAD,EAAW;AAC1CU,MAAAA,SAAS,EAAE,QAD+B;AAE1CpB,MAAAA,IAAI,EAAE,QAFoC;AAG1CuC,MAAAA,SAAS,EAAE,QAH+B;AAI1CgE,MAAAA,OAAO,EAAEgD;AAJiC,KAAX,CAAjC;AAOA,SAAKsB,YAAL,GAAoBnK,aAAa,CAAC,QAAD,EAAW;AAC1CU,MAAAA,SAAS,EAAE,QAD+B;AAE1CpB,MAAAA,IAAI,EAAE,QAFoC;AAG1CuC,MAAAA,SAAS,EAAE,QAH+B;AAI1CgE,MAAAA,OAAO,EAAE;AACP,YAAI;AACF,gBAAMsD,WAAW,EAAjB;AACD,SAFD,CAEE,OAAOlK,CAAP,EAAU;AAEX,SAJD,SAIU;AACR,eAAKmL,WAAL;AACD;AACF;AAZyC,KAAX,CAAjC;AAeA,UAAMC,WAAW,GAAGrK,aAAa,CAAC,QAAD,EAAW;AAC1CU,MAAAA,SAAS,EAAE,QAD+B;AAE1CpB,MAAAA,IAAI,EAAE,QAFoC;AAG1CuC,MAAAA,SAAS,EAAE,OAH+B;AAI1CgE,MAAAA,OAAO,EAAE,KAAKP,KAAL,CAAW3L,IAAX,CAAgB,IAAhB;AAJiC,KAAX,CAAjC;AAOA,SAAKyQ,WAAL;AAEA,SAAKrE,YAAL,CAAkBvE,WAAlB,CAA8B,KAAK0I,YAAnC;AACA,SAAKnE,YAAL,CAAkBvE,WAAlB,CAA8B,KAAK2I,YAAnC;AACA,SAAKpE,YAAL,CAAkBvE,WAAlB,CAA8B6I,WAA9B;AACA,SAAK3E,MAAL,CAAYlE,WAAZ,CAAwB,KAAKmE,UAA7B;AACA,SAAKD,MAAL,CAAYlE,WAAZ,CAAwB,KAAKuE,YAA7B;AACA,SAAKC,QAAL,CAAcxE,WAAd,CAA0B,KAAKkE,MAA/B;AACD;;AA+DDjE,EAAAA,OAAO;;;AACL,UAAA,KAAKuE,QAAL,CAActE,UAAd,UAAA,iBAAA,SAAA,MAA0BC,YAAY,KAAKqE,SAA3C;AACD;;AA0BDW,EAAAA,IAAI;AACFpQ,IAAAA,QAAQ,CAACgM,IAAT,CAAcf,WAAd,CAA0B,KAAKwE,QAA/B;AACD;;AAEDV,EAAAA,KAAK;AACH,SAAKG,aAAL;AACA,SAAKhE,OAAL;AACD;;AAED6I,EAAAA,SAAS;;;AACP,SAAK,MAAMC,KAAX,IAAoBzL,KAAK,CAACoH,IAAN,CAAW,KAAKP,UAAL,CAAgB6E,QAA3B,CAApB,EAA0D;AACxD,YAAAD,KAAK,CAAC7I,UAAN,UAAA,iBAAA,SAAA,MAAkBC,YAAY4I,MAA9B;AACD;AACF;;AAEDH,EAAAA,WAAW;AACT,UAAMK,UAAU,GAAG,KAAKC,QAAL,EAAnB;AACA,UAAMC,OAAO,GAAGF,UAAU,CAACrN,MAAX,KAAsB,CAAtC;AAEA,SAAK8M,YAAL,CAAkBzH,QAAlB,GAA6BkI,OAA7B;AAEA,SAAKL,SAAL;;AAEA,QAAIK,OAAJ,EAAa;AACX,YAAMC,SAAS,GAAG5K,aAAa,CAAC,KAAD,EAAQ;AACrCU,QAAAA,SAAS,EAAE,YAD0B;AAErCmB,QAAAA,SAAS,EAAE;AAF0B,OAAR,CAA/B;AAKA,WAAK8D,UAAL,CAAgBnE,WAAhB,CAA4BoJ,SAA5B;AACD,KAPD,MAOO;AACL;AACA,YAAMC,SAAS,GAAG7K,aAAa,CAAC,IAAD,EAAO;AACpCU,QAAAA,SAAS,EAAE;AADyB,OAAP,CAA/B;;AAIA,WAAK,MAAMoK,IAAX,IAAmBL,UAAnB,EAA+B;AAC7BI,QAAAA,SAAS,CAACrJ,WAAV,CAAsBsJ,IAAtB;AACD;;AAED,WAAKnF,UAAL,CAAgBnE,WAAhB,CAA4BqJ,SAA5B;AACD;AACF;;;;AC5NH,MAAME,SAAS,GAAIC,KAAD;AAChBpT,EAAAA,MAAM,CAACsJ,IAAP,CAAY,OAAZ,EAAqB8J,KAArB,EAA4B;AAC1B7J,IAAAA,cAAc,EAAE;AADU,GAA5B;AAGD,CAJD;;AAMA,MAAM8J,UAAU,GAAIC,GAAD;AACjB,QAAMtK,IAAI,GAAG,IAAIH,IAAJ,EAAb;AAEA,MAAI0K,YAAJ;AAEAvK,EAAAA,IAAI,CAACgB,WAAL;AAEE,OAFF,EAGI;AACFhC,IAAAA,QAAQ,EAAE;AACRuL,MAAAA,YAAY,GAAG,EAAf;AACAvK,MAAAA,IAAI,CAACQ,SAAL;AACA8J,MAAAA,GAAG,CAAChN,KAAJ;AACA6M,MAAAA,SAAS,CAAC,UAAD,CAAT;AACD;AANC,GAHJ;AAYAnK,EAAAA,IAAI,CAACgB,WAAL;AAEE,QAFF,EAGI;AACF;AACAhC,IAAAA,QAAQ,EAAE;AACR;AACA,YAAMwL,QAAQ,GAAGF,GAAG,CAACpP,UAAJ,CAAeyC,MAAf,EAAjB;;AAEA,UAAI6M,QAAQ,KAAK,IAAjB,EAAuB;AACrB;AACAxK,QAAAA,IAAI,CAACQ,SAAL;AACA2J,QAAAA,SAAS,CAAC,iBAAD,CAAT;AACA;AACD;;AAED,YAAMpK,EAAE,GAAGwK,YAAY,IAAIpC,MAAA,CAAeqC,QAAf,CAA3B;AACA,UAAIxG,MAAM,GAAG,cAAb;AACA,UAAIC,MAAM,GAAG,QAAb;;AAEA,UAAIsG,YAAJ,EAAkB;AAChBvG,QAAAA,MAAM,GAAG,gBAAT;AACAC,QAAAA,MAAM,GAAG,iBAAT;AACD;;AAED,YAAM,CAACiG,IAAD,IAAS/B,WAAA,CAAoBpI,EAApB,CAAf;AAEAC,MAAAA,IAAI,CAACQ,SAAL;AAEA,UAAIsD,MAAJ,CAAW,MAAX,EAAmB;AAAEE,QAAAA,MAAF;AAAUC,QAAAA;AAAV,OAAnB,EACGyB,QADH,CACY,MADZ,EACoB;AAChBhH,QAAAA,IAAI,EAAE,MADU;AAEhBsE,QAAAA,IAAI,EAAE,MAFU;AAGhBjI,QAAAA,KAAK,EAAEmP,IAAI,SAAJ,IAAAA,IAAI,WAAJ,SAAA,GAAAA,IAAI,CAAElH;AAHG,OADpB,EAMGyH,QANH,CAMY;YAAC;AAAEzH,UAAAA;AAAF;;AACT,YAAI,CAACA,IAAL,EAAW;AACT;AACA,iBAAO,KAAP;AACD;;AAED,YAAIuH,YAAJ,EAAkB;AAChB;AACApC,UAAAA,aAAA,CAAsBoC,YAAtB,EAAoCC,QAApC;AACD;;AAEDrC,QAAAA,MAAA,CAAepI,EAAf,EAAmB;AACjBiD,UAAAA;AADiB,SAAnB;AAIAmH,QAAAA,SAAS,CAAC,mBAAD,CAAT;AAEA,eAAO,IAAP;AACD,OAxBH,EAyBGO,QAzBH,CAyBY;AACR;AACA,YAAI,CAACH,YAAL,EAAmB;AACjB;AACApC,UAAAA,UAAA,CAAmBpI,EAAnB;AACD;;AACDoK,QAAAA,SAAS,CAAC,kBAAD,CAAT;AACD,OAhCH,EAiCGpE,IAjCH;AAkCD;AA5DC,GAHJ;AAkEA/F,EAAAA,IAAI,CAACgB,WAAL;AAEE,cAFF,EAGI;AACFhC,IAAAA,QAAQ,EAAE;AACRgB,MAAAA,IAAI,CAACQ,SAAL;AAEA2J,MAAAA,SAAS,CAAC,iBAAD,CAAT;;AAGA,YAAMF,SAAS,GAAG,IAAIxB,SAAJ,CAAc,gBAAd,CAAlB;AACAwB,MAAAA,SAAS,CACNU,OADH,CACW;YAAC;AAAEpL,UAAAA;AAAF;AACR,cAAM8I,OAAO,GAAGF,GAAA,CAAY5I,GAAZ,CAAhB;;AAEA,YAAI8I,OAAJ,EAAa;AACXiC,UAAAA,GAAG,CAACpP,UAAJ,CAAe6C,MAAf,CAAsBsK,OAAtB,EADW;;AAGXkC,UAAAA,YAAY,GAAGhL,GAAf;AACA4K,UAAAA,SAAS,CAAC,sBAAD,CAAT;AACD,SALD,MAKO;AACL;AACAhC,UAAAA,UAAA,CAAmB5I,GAAnB;AACA4K,UAAAA,SAAS,CAAC,8BAAD,CAAT;AACD;AACF,OAdH,EAeGS,QAfH,CAeY;YAAC;AAAErL,UAAAA;AAAF;AACT4I,QAAAA,UAAA,CAAmB5I,GAAnB;;AAEA0K,QAAAA,SAAS,CAACT,WAAV;AAEAW,QAAAA,SAAS,CAAC,wBAAD,CAAT;AACD,OArBH,EAsBGU,MAtBH,CAsBU;YAAC;AAAE7H,UAAAA,IAAF;AAAQzD,UAAAA;AAAR;AACP,YAAIuE,MAAJ,CAAW,QAAX,EAAqB;AAAEE,UAAAA,MAAM,EAAE;AAAV,SAArB,EACG0B,QADH,CACY,MADZ,EACoB;AAChBhH,UAAAA,IAAI,EAAE,MADU;AAEhBsE,UAAAA,IAAI,EAAE,MAFU;AAGhBjI,UAAAA,KAAK,EAAEiI;AAHS,SADpB,EAMGyH,QANH,CAM8B;cAAC;AAAEzH,YAAAA,IAAI,EAAE8H;AAAR;;AAC3B,cAAI,CAACA,OAAL,EAAc;AACZ;AACA,mBAAO,KAAP;AACD;;AAED3C,UAAAA,MAAA,CAAe5I,GAAf,EAAoB;AAClByD,YAAAA,IAAI,EAAE8H;AADY,WAApB;AAIAb,UAAAA,SAAS,CAACT,WAAV;AAEAW,UAAAA,SAAS,CAAC,sBAAD,CAAT;AAEA,iBAAO,IAAP;AACD,SArBH,EAsBGpE,IAtBH;AAuBD,OA9CH,EA+CGgF,OA/CH,CA+CW;AACPT,QAAAA,GAAG,CAACU,SAAJ;AACAV,QAAAA,GAAG,CAACpP,UAAJ,CAAemB,MAAf,CAAsBhE,IAAtB;AACD,OAlDH,EAmDG0N,IAnDH;AAoDD;AA5DC,GAHJ;AAmEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAO/F,IAAP;AACD,CA5LD;;ACXA;AAaA;AACA;AACA;AACA;AACA;AACA;;AACA,MAAMJ,aAAW,GAAG7J,YAApB;;AAEA,MAAMkV,GAAN;AAAAlW,EAAAA;;;AACE,uBAAA,GAAiB,GAAjB;AAEA,gBAAA,GAAU,KAAV;AAEA,mBAAA,GAAa,IAAIiH,UAAJ,EAAb;AAEA,aAAA,GAAoB,IAApB;;AAEA,wBAAA,GAAkB,QAAlB;;AA+BA,eAAA,GAAS;UAACuF,4EAAQ;AAChB,YAAM2J,cAAc,GAAwB;AAC1CC,QAAAA,SAAS,EAAE,KAAI,CAACC,eAD0B;AAE1CC,QAAAA,UAAU,EAAE,KAAI,CAACC,gBAFyB;AAG1CC,QAAAA,OAAO,EAAE,KAAI,CAACC,aAH4B;AAI1CC,QAAAA,QAAQ,EAAE,KAAI,CAACD;AAJ2B,OAA5C;AAMA,YAAME,YAAY,GAAwB;AACxCC,QAAAA,OAAO,EAAE,KAAI,CAACC,aAD0B;AAExCC,QAAAA,KAAK,EAAE,KAAI,CAACC,WAF4B;AAGxChK,QAAAA,KAAK,EAAE,KAAI,CAACiK,WAH4B;AAIxCC,QAAAA,QAAQ,EAAE,KAAI,CAACC;AAJyB,OAA1C;AAOA,YAAMzK,MAAM,GAAGD,KAAK,KAAK,IAAV,GAAiB,kBAAjB,GAAsC,qBAArD;;AAGA,WAAK,MAAMhC,GAAX,IAAkB2L,cAAlB,EAAkC;AAChC,cAAMgB,GAAG,GAAGhB,cAAc,CAAC3L,GAAD,CAA1B;AACAK,QAAAA,aAAW,CAAC4B,MAAD,CAAX,CAAoBjC,GAApB,EAAyB2M,GAAzB;AACD;;;AAGD,WAAK,MAAM3M,GAAX,IAAkBmM,YAAlB,EAAgC;AAC9B,cAAMQ,GAAG,GAAGR,YAAY,CAACnM,GAAD,CAAxB;AACA1J,QAAAA,SAAS,CAAC2L,MAAD,CAAT,CAAkBjC,GAAlB,EAAuB2M,GAAvB;AACD;;AAED,UAAI3K,KAAK,KAAK,IAAd,EAAoB;AAClB;AACA,QAAA,KAAI,CAAC4K,eAAL,GAAuBpN,YAAY,CAACa,aAAD,EAAevB,CAAD;;;AAC/C,gBAAMpG,QAAQ,GAAGuG,oBAAoB,CAACH,CAAD,CAArC;;AAGAxI,UAAAA,SAAS,CAACuW,IAAV;AAEA,gBAAA,KAAI,CAACpM,IAAL,UAAA,iBAAA,SAAA,MAAWK,SAASpI,SAApB;AACD,SAPkC,CAAnC;AAQD,OAVD,MAUO;AACL,QAAA,KAAI,CAACkU,eAAL;;AACA,QAAA,KAAI,CAACA,eAAL,GAAuB,QAAvB;AACD;AACF,KA1CD;;AA4CA,oBAAA,GAAuC,EAAvC;AAEA;;;;;AAIA,sBAAA,GAAiB9N,CAAD;AACd,YAAMgO,MAAM,GAAGhO,CAAC,CAACiO,MAAF,IAAYjO,CAAC,CAACkO,OAAd,IAAyBlO,CAAC,CAACmO,OAA1C;AACA,YAAMC,OAAO,GAAsB5X,QAAgB,CAACwJ,CAAC,CAACqO,KAAH,CAAhB,IAA6BL,MAAhE;AACA,YAAMM,SAAS,GAAG,KAAKC,WAAL,CAAiBvO,CAAC,CAACwO,IAAnB,CAAlB;;AAEA,UAAIF,SAAJ,EAAe;AACb,eAAO,KAAP;AACD;;AAED,UAAI,CAACF,OAAL,EAAc;AACZ,aAAKG,WAAL,CAAiBvO,CAAC,CAACwO,IAAnB,IAA2B,IAA3B;;AAEA,YAAIxO,CAAC,CAACkB,GAAF,KAAU,OAAd,EAAuB;;AAKvB,eAAO,IAAP;AACD;;AAED,UAAIkN,OAAO,KAAK,KAAhB,EAAuB;AACrB;AACAzV,QAAAA,MAAM,CAAC6B,UAAP,CAAkB;AAChBhD,UAAAA,SAAS,CAACiM,KAAV;AACD,SAFD,EAEG,EAFH;AAGAzD,QAAAA,CAAC,CAAC+B,cAAF;AACD;;AAED,aAAO,IAAP;AACD,KA7BD;;AA+BA,uBAAA,GAAkB/B,CAAD;AACf,YAAMgO,MAAM,GAAGhO,CAAC,CAACiO,MAAF,IAAYjO,CAAC,CAACkO,OAAd,IAAyBlO,CAAC,CAACmO,OAA1C;AACA,YAAMM,OAAO,GAAGzO,CAAC,CAACkB,GAAF,KAAU,KAAV,IAAmBlB,CAAC,CAACkB,GAAF,KAAU,OAA7C;;AAEA,UAAIuN,OAAO,IAAIT,MAAf,EAAuB;AACrBhO,QAAAA,CAAC,CAAC+B,cAAF;AACD;;AAED,aAAO,CAAC0M,OAAR;AACD,KATD;AAWA;;;;;;AAIA,oBAAA,GAAezO,CAAD;AACZ,YAAM;AAAEkB,QAAAA,GAAF;AAAOsN,QAAAA;AAAP,UAAgBxO,CAAtB;AACA,YAAM0O,SAAS,GAAGxN,GAAG,KAAK,OAA1B;AACA,YAAM8M,MAAM,GAAGhO,CAAC,CAACiO,MAAF,IAAYjO,CAAC,CAACkO,OAAd,IAAyBlO,CAAC,CAACmO,OAA1C;;AAEA,UAAIO,SAAJ,EAAe;AACb;AACD;;AAED,UAAI,KAAKH,WAAL,CAAiBC,IAAjB,CAAJ,EAA4B;AAC1B,eAAO,KAAKD,WAAL,CAAiBC,IAAjB,CAAP;AACD;;AAED,UAAIR,MAAJ,EAAY;AACV;AACA,aAAKW,SAAL;AAEA;AACD;;AAED,YAAM;AAAE9R,QAAAA;AAAF,UAAiB,IAAvB;AACA,YAAM+R,GAAG,GAAG/R,UAAU,CAACmB,MAAX,CAAkB6Q,UAAlB,CAA6B3N,GAA7B,CAAZ;AAEA;;AACA,YAAM4N,OAAO,GAAGtX,SAAS,CAACkF,KAAV,CAAgBqS,MAAhB,CAAuB,CAAvB,CAAhB;;AAEA,UAAIH,GAAJ,EAAS;AACPA,QAAAA,GAAG;AACJ,OAFD,MAEO,IAAIE,OAAJ,EAAa;AAClBjS,QAAAA,UAAU,CAACkD,YAAX,CAAwB+O,OAAxB;AACD;;AAED,WAAKH,SAAL;;AAEAnX,MAAAA,SAAS,CAACuW,IAAV;AACA,WAAKpB,SAAL;AACD,KApCD;;AAsCA,oBAAA,GAAc;AACZ,WAAKA,SAAL;AACD,KAFD;;AAMA,0BAAA,GAAmC,IAAnC;AAEA;;;;;AAIA,wBAAA,GAAmB3M,CAAD;AAChB;AACA;AACA,UAAI,YAAYA,CAAZ,IAAiBA,CAAC,CAACgP,MAAF,KAAa,CAAlC,EAAqC;;AAGrC,WAAKC,cAAL,GAAsBtW,MAAM,CAAC6B,UAAP,CAAkB;AACtC,aAAK0U,iBAAL,GAAyB/O,oBAAoB,CAACH,CAAD,CAA7C;AAEAuB,QAAAA,aAAW,CAACnC,gBAAZ,CAA6B,WAA7B,EAA0C,KAAK+P,eAA/C;AACA5N,QAAAA,aAAW,CAACnC,gBAAZ,CAA6B,WAA7B,EAA0C,KAAK+P,eAA/C;AACD,OALqB,EAKnB,KAAKC,cALc,CAAtB;AAMD,KAZD;AAcA;;;;;;AAIA,yBAAA,GAAoBpP,CAAD;AACjBA,MAAAA,CAAC,CAAC+B,cAAF;AACA/B,MAAAA,CAAC,CAACqP,eAAF;;AAEA,UAAIrP,CAAC,CAACO,OAAF,IAAaP,CAAC,CAACO,OAAF,CAAUpC,MAAV,KAAqB,CAAtC,EAAyC;AACvC;AACA;AAEA,eAAO,IAAP;AACD;;AAED,aAAO,KAAK4O,eAAL,CAAqB/M,CAArB,CAAP;AACD,KAZD;AAcA;;;;;;AAIA,wBAAA,GAAmBA,CAAD;AAChB;AACAA,MAAAA,CAAC,CAAC+B,cAAF;AACA/B,MAAAA,CAAC,CAACqP,eAAF;;AAEA,UAAI,CAAC,KAAKH,iBAAV,EAA6B;AAC3B;AACD;;AAED,YAAMI,SAAS,GAAGnP,oBAAoB,CAACH,CAAD,CAApB,CAAwB/I,SAAxB,CAAkC,KAAKiY,iBAAvC,CAAlB;;;AAGAnX,MAAAA,YAAY,CAACV,SAAD,EAAYiY,SAAZ,CAAZ;AAEA,WAAKzS,UAAL,CAAgBmB,MAAhB,CAAuBjE,KAAvB;AACD,KAfD;AAiBA;;;;;;AAIA,sBAAA,GAAiBiG,CAAD;AACd,YAAMuP,UAAU,GAAG,YAAYvP,CAAZ,IAAiBA,CAAC,CAACgP,MAAF,KAAa,CAAjD;AACA,YAAMQ,YAAY,GAAG,aAAaxP,CAAb,IAAkBA,CAAC,CAACO,OAAF,CAAUpC,MAAV,GAAmB,CAA1D;AAEA,UAAIoR,UAAU,IAAIC,YAAlB,EAAgC;AAEhC,WAAKC,eAAL;AAEA,YAAM7V,QAAQ,GAAGuG,oBAAoB,CAACH,CAAD,CAArC;;AAEA,UAAI,KAAKkP,iBAAT,EAA4B;AAC1B;AACAtV,QAAAA,QAAQ,CAAC3C,SAAT,CAAmB,KAAKiY,iBAAxB;;AAEA,aAAKrS,UAAL,CAAgBmC,UAAhB,CAA2BpF,QAA3B;AACA,aAAKsV,iBAAL,GAAyB,IAAzB;AACD,OAND,MAMO;AACL;AACA,aAAKQ,YAAL,CAAkB9V,QAAlB;AACD;AACF,KApBD;AAsBA;;;;;;AAIA,qBAAA,GAAgBA,QAAD;AACb,WAAKiD,UAAL,CAAgBmB,MAAhB,CAAuB2R,WAAvB,CAAmC/V,QAAnC;AACA,WAAK+S,SAAL;AACD,KAHD;;AAKA,wBAAA,GAAkB;AAChBhU,MAAAA,MAAM,CAACwB,YAAP,CAAoB,KAAK8U,cAAzB;AACA1N,MAAAA,aAAW,CAACT,mBAAZ,CAAgC,WAAhC,EAA6C,KAAKqO,eAAlD;AACA5N,MAAAA,aAAW,CAACT,mBAAZ,CAAgC,WAAhC,EAA6C,KAAKqO,eAAlD;AACD,KAJD;;AAMA,kBAAA,GAAY;AACV;AACA3X,MAAAA,SAAS,CAACkF,KAAV,GAAkB,EAAlB;;AAEAlF,MAAAA,SAAS,CAACkF,KAAV,GAAkB,GAAlB;AACD,KALD;;AAOA,kBAAA,GAAY;AACVlF,MAAAA,SAAS,CAACiM,KAAV;AAED,KAHD;AAID;;AAxRCxE,EAAAA,KAAK;AACH,SAAK2Q,OAAL,GAAe,IAAf;AACA,SAAK/S,UAAL,CAAgBoC,KAAhB;AACA,SAAKmD,MAAL,CAAY,IAAZ;AACA,SAAKuM,SAAL;AACA,SAAKhC,SAAL;AACD;;AAEDkD,EAAAA,KAAK;AACH,QAAI,KAAKD,OAAT,EAAkB;AAElB,SAAK3Q,KAAL;AAEA,SAAK0C,IAAL,GAAYqK,UAAU,CAAC,IAAD,CAAtB;AACD;;AAED8D,EAAAA,IAAI;;;AACF,QAAI,CAAC,KAAKF,OAAV,EAAmB;AACnB,SAAKA,OAAL,GAAe,KAAf;;AAGA,SAAKxN,MAAL,CAAY,KAAZ;AACA,SAAKqN,eAAL;AAEA,UAAA,KAAK9N,IAAL,UAAA,iBAAA,SAAA,MAAWa,SAAX;AAEA,SAAKb,IAAL,GAAY,IAAZ;AACD;;;;AC3DH,MAAM;AAAEoO,EAAAA;AAAF,IAAapX,MAAM,CAACqX,QAA1B;AACA,MAAMC,KAAK,GAAGF,MAAM,GAChBA,MAAM,CACHhB,MADH,CACU,CADV,EAEGmB,KAFH,CAES,GAFT,EAGGC,MAHH,CAGU,CAACC,IAAD,EAA4BC,GAA5B;AACN,QAAM,CAACnP,GAAD,EAAMoP,GAAN,IAAaD,GAAG,CAACH,KAAJ,CAAU,GAAV,CAAnB;;AAEAE,EAAAA,IAAI,CAAClP,GAAD,CAAJ,GAAYoP,GAAZ;AAEA,SAAOF,IAAP;AACD,CATH,EASK,EATL,CADgB,GAWhB,EAXJ;;AAaA,MAAMG,WAAW,GAAG,MAAe,WAAWN,KAA9C;;ACqBO;AACL;AACAtX,EAAAA,MAAM,CAACsJ,IAAP,GAAchC,OAAO,CAACuQ,GAAtB;AACD;;ACtCD;;;;;AASA,MAAMC,MAAM,GAAGnZ,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAf;;AAEA,MAAMmZ,QAAQ,GAAI1Q,CAAD;AACf,MAAIA,CAAC,CAACiO,MAAF,IAAYjO,CAAC,CAACkO,OAAd,IAAyBlO,CAAC,CAACmO,OAA/B,EAAwC;AACtC;AACA;AACD;;AAEDsC,EAAAA,MAAM,CAAC1N,SAAP,CAAiBlM,GAAjB,CAAqB,MAArB;AAEA4Z,EAAAA,MAAM,CAAC3P,mBAAP,CAA2B,OAA3B,EAAoC4P,QAApC;AACAD,EAAAA,MAAM,CAAC3P,mBAAP,CAA2B,OAA3B,EAAoC4P,QAApC;AAEA,QAAMzE,GAAG,GAAG,IAAIW,GAAJ,EAAZ;AAEAX,EAAAA,GAAG,CAAC4D,KAAJ;AAGA;;AACA5D,EAAAA,GAAG,CAACU,SAAJ;AACD,CAlBD;;AAoBA,MAAMpD,MAAM,GAAG;AACb,MAAI5Q,MAAM,CAACqX,QAAP,CAAgBW,IAApB,EAA0B;AACxBhY,IAAAA,MAAM,CAACqX,QAAP,CAAgBW,IAAhB,GAAuB,EAAvB;AACD;;AAEDF,EAAAA,MAAM,CAAChN,KAAP;AAEAgN,EAAAA,MAAM,CAACrR,gBAAP,CAAwB,OAAxB,EAAiCsR,QAAjC;AACAD,EAAAA,MAAM,CAACrR,gBAAP,CAAwB,OAAxB,EAAiCsR,QAAjC;AAEA/X,EAAAA,MAAM,CAACmI,mBAAP,CAA2B,MAA3B,EAAmCyI,MAAnC;AACD,CAXD;AAaA;;;;;AAGA5Q,MAAM,CAACyG,gBAAP,CAAwB,MAAxB,EAAgCmK,MAAhC;;AAGA,IAAI,mBAAmBqH,SAAnB,IAAgC,kBAAyB,YAA7D,EAA2E;AACzEA,EAAAA,SAAS,CAACC,aAAV,CACGC,QADH,CACY,QADZ,EAEGC,IAFH,CAESC,GAAD;AACJ,QAAIA,GAAG,CAACC,UAAR,EAAoB;AAClB;AACAhR,MAAAA,OAAO,CAACuQ,GAAR,CAAY,2BAAZ;AACD,KAHD,MAGO,IAAIQ,GAAG,CAACE,OAAR,EAAiB;AACtB;AACAjR,MAAAA,OAAO,CAACuQ,GAAR,CAAY,0BAAZ;AACD,KAHM,MAGA,IAAIQ,GAAG,CAACG,MAAR,EAAgB;AACrB;AACAlR,MAAAA,OAAO,CAACuQ,GAAR,CAAY,uBAAZ;AACD;AACF,GAbH,EAcGY,KAdH,CAcUpR,CAAD;AACL;AACAC,IAAAA,OAAO,CAACC,KAAR,CAAc,uBAAd;;AAEAD,IAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACD,GAnBH;AAoBD;AAGD;;;AACA,IAAIuQ,WAAW,EAAf,EAAmB;AACjBjZ,EAAAA,QAAQ,CAACgM,IAAT,CAAcP,SAAd,CAAwBlM,GAAxB,CAA4B,OAA5B;AACD;;"}